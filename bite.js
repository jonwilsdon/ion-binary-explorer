var BITE=(()=>{var x=(r,t)=>()=>(t||(t={exports:{}},r(t.exports,t)),t.exports);var L=x(z=>{"use strict";var W=class{constructor(){}nextByte(){return null}skipBytes(t){return null}setPosition(t){return null}atEnd(t){}size(){}readVarUInt(t){let l=0,i=0,n;do{if(n=this.nextByte(),n===null)return this.skipBytes(-1*l),null;l++,l===5&&(i=BigInt(i)),l>4?i=i<<7n|BigInt(n&127):i=i<<7|n&127}while(!(n&128));return{numBytesRead:l,magnitude:i}}readUInt(t,l){let i=0,n=0,s;do{if(s=this.nextByte(),s===null)return this.skipBytes(-1*i),null;i++,i===4&&(n=BigInt(n)),i>3?n=n<<8n|BigInt(s):n=n<<8|s}while(i<t);return{numBytesRead:i,magnitude:n}}readVarInt(t){let l=0,i=0,n,s;do{if(s=this.nextByte(),s===null)return this.skipBytes(-1*l),null;l++,l===5&&(i=BigInt(i)),l===1?(n=(s&64)!=0,i=s&63):l>4?i=i<<7n|BigInt(s&127):i=i<<7|s&127}while(!(s&128));return{numBytesRead:l,magnitude:n===!0?-i:i,isNegative:n}}readInt(t,l){let i=0,n=0,s,a;do{if(a=this.nextByte(),a===null)return this.skipBytes(-1*i),null;i++,i===4&&(n=BigInt(n)),i===1?(s=(a&128)!=0,n=n<<7|a&127):i>3?n=n<<8n|BigInt(a):n=n<<8|a}while(i<t);return{numBytesRead:i,magnitude:s===!0?-n:n,isNegative:s}}};z.ByteReader=W});var O=x(j=>{"use strict";var St=L(),M=class extends St.ByteReader{#l=null;#e=null;#i=0;constructor(){super()}loadBuffer(t){if(this.#l=t,this.#l===null||this.#l===void 0)throw new Error(`ByteBufferReader loadBuffer() called with a ${this.#l} buffer.`);if(this.#l instanceof ArrayBuffer)this.#e=new Uint8Array(this.#l);else if(this.#l instanceof Uint8Array)this.#e=this.#l;else throw new Error("ByteBufferReader loadBuffer() called with an unsupported buffer type.");return this.#e.length}nextByte(){if(this.atEnd()||this.#i+1>this.#e.length)return null;let t=this.#e[this.#i];return this.#i++,t}skipBytes(t){this.#i+=t}setPosition(t){this.#i=t}atEnd(t){return t===this.#e.length?!0:t>this.#e.length?null:!1}rawBytes(t,l){return this.#e.slice(t,t+l)}get positionInBuffer(){return this.#i}get size(){return this.#e.length}};j.ByteBufferReader=M});var B=x(G=>{"use strict";var _={null:0,bool:1,"int+":2,"int-":3,float:4,decimal:5,timestamp:6,symbol:7,string:8,clob:9,blob:10,list:11,sexp:12,struct:13,annotation:14,reserved:15,bvm:16,nop:17,template:18,inline_annotation:19,inline_symbol:20,inline_fieldname:21,numTypes:22,isContainer:function(r){return r===this.list||r===this.sexp||r===this.struct},isScalar:function(r){return r===this.null||r===this.bool||r===this["int+"]||r===this["int-"]||r===this.float||r===this.decimal||r===this.timestamp||r===this.symbol||r===this.string||r===this.clob||r===this.blob||r===this.inline_symbol},nameFromType:function(r){return H[r]}},H=new Array(_.numTypes);for(let[r,t]of Object.entries(_))r!=="numTypes"&&(H[t]=r);G.IonTypes=_});var w=x(X=>{"use strict";var $=B().IonTypes,Bt=(r,t)=>{if(t==null)throw new Error("readScalar called with no scalarReader");if(!(r.type===$["int+"]||r.type===$["int-"]||r.type===$.float||r.type===$.decimal||r.type===$.timestamp||r.type===$.symbol||r.type===$.string||r.type===$.clob||r.type===$.blob))throw new Error(`readScalar called with a non-scalar type ${r.type}`);return t.read(r.type,r.bytePositionOfRepresentation,r.lengthWithoutAnnotations-r.varUIntLength)};X.readScalarFromElement=Bt});var V=x(Z=>{"use strict";var $t=L(),Kt=w(),e=B().IonTypes,J=class{#l=[()=>({type:e.nop,length:0,isNull:!1}),()=>({type:e.nop,length:1,isNull:!1}),()=>({type:e.nop,length:2,isNull:!1}),()=>({type:e.nop,length:3,isNull:!1}),()=>({type:e.nop,length:4,isNull:!1}),()=>({type:e.nop,length:5,isNull:!1}),()=>({type:e.nop,length:6,isNull:!1}),()=>({type:e.nop,length:7,isNull:!1}),()=>({type:e.nop,length:8,isNull:!1}),()=>({type:e.nop,length:9,isNull:!1}),()=>({type:e.nop,length:10,isNull:!1}),()=>({type:e.nop,length:11,isNull:!1}),()=>({type:e.nop,length:12,isNull:!1}),()=>({type:e.nop,length:13,isNull:!1}),()=>({type:e.nop,length:14,isNull:!1}),()=>({type:e.null,length:0,isNull:!0}),()=>({type:e.bool,length:0,isNull:!1,bool:!1}),()=>({type:e.bool,length:0,isNull:!1,bool:!0}),()=>this.#t("0x12"),()=>this.#t("0x13"),()=>this.#t("0x14"),()=>this.#t("0x15"),()=>this.#t("0x16"),()=>this.#t("0x17"),()=>this.#t("0x18"),()=>this.#t("0x19"),()=>this.#t("0x1a"),()=>this.#t("0x1b"),()=>this.#t("0x1c"),()=>this.#t("0x1d"),()=>this.#t("0x1e"),()=>({type:e.bool,length:0,isNull:!0}),()=>({type:e["int+"],length:0,isNull:!1}),()=>({type:e["int+"],length:1,isNull:!1}),()=>({type:e["int+"],length:2,isNull:!1}),()=>({type:e["int+"],length:3,isNull:!1}),()=>({type:e["int+"],length:4,isNull:!1}),()=>({type:e["int+"],length:5,isNull:!1}),()=>({type:e["int+"],length:6,isNull:!1}),()=>({type:e["int+"],length:7,isNull:!1}),()=>({type:e["int+"],length:8,isNull:!1}),()=>({type:e["int+"],length:9,isNull:!1}),()=>({type:e["int+"],length:10,isNull:!1}),()=>({type:e["int+"],length:11,isNull:!1}),()=>({type:e["int+"],length:12,isNull:!1}),()=>({type:e["int+"],length:13,isNull:!1}),()=>({type:e["int+"],length:14,isNull:!1}),()=>({type:e["int+"],length:0,isNull:!0}),()=>this.#t("0x30"),()=>({type:e["int-"],length:1,isNull:!1}),()=>({type:e["int-"],length:2,isNull:!1}),()=>({type:e["int-"],length:3,isNull:!1}),()=>({type:e["int-"],length:4,isNull:!1}),()=>({type:e["int-"],length:5,isNull:!1}),()=>({type:e["int-"],length:6,isNull:!1}),()=>({type:e["int-"],length:7,isNull:!1}),()=>({type:e["int-"],length:8,isNull:!1}),()=>({type:e["int-"],length:9,isNull:!1}),()=>({type:e["int-"],length:10,isNull:!1}),()=>({type:e["int-"],length:11,isNull:!1}),()=>({type:e["int-"],length:12,isNull:!1}),()=>({type:e["int-"],length:13,isNull:!1}),()=>({type:e["int-"],length:14,isNull:!1}),()=>({type:e["int-"],length:0,isNull:!0}),()=>({type:e.float,length:0,isNull:!1}),()=>this.#t("0x41"),()=>this.#t("0x42"),()=>this.#t("0x43"),()=>({type:e.float,length:4,isNull:!1}),()=>this.#t("0x45"),()=>this.#t("0x46"),()=>this.#t("0x47"),()=>({type:e.float,length:8,isNull:!1}),()=>this.#t("0x49"),()=>this.#t("0x4a"),()=>this.#t("0x4b"),()=>this.#t("0x4c"),()=>this.#t("0x4d"),()=>this.#t("0x4e"),()=>({type:e.float,length:0,isNull:!0}),()=>({type:e.decimal,length:0,isNull:!1}),()=>({type:e.decimal,length:1,isNull:!1}),()=>({type:e.decimal,length:2,isNull:!1}),()=>({type:e.decimal,length:3,isNull:!1}),()=>({type:e.decimal,length:4,isNull:!1}),()=>({type:e.decimal,length:5,isNull:!1}),()=>({type:e.decimal,length:6,isNull:!1}),()=>({type:e.decimal,length:7,isNull:!1}),()=>({type:e.decimal,length:8,isNull:!1}),()=>({type:e.decimal,length:9,isNull:!1}),()=>({type:e.decimal,length:10,isNull:!1}),()=>({type:e.decimal,length:11,isNull:!1}),()=>({type:e.decimal,length:12,isNull:!1}),()=>({type:e.decimal,length:13,isNull:!1}),()=>({type:e.decimal,length:14,isNull:!1}),()=>({type:e.decimal,length:0,isNull:!0}),()=>this.#t("0x60"),()=>this.#t("0x61"),()=>({type:e.timestamp,length:2,isNull:!1}),()=>({type:e.timestamp,length:3,isNull:!1}),()=>({type:e.timestamp,length:4,isNull:!1}),()=>({type:e.timestamp,length:5,isNull:!1}),()=>({type:e.timestamp,length:6,isNull:!1}),()=>({type:e.timestamp,length:7,isNull:!1}),()=>({type:e.timestamp,length:8,isNull:!1}),()=>({type:e.timestamp,length:9,isNull:!1}),()=>({type:e.timestamp,length:10,isNull:!1}),()=>({type:e.timestamp,length:11,isNull:!1}),()=>({type:e.timestamp,length:12,isNull:!1}),()=>({type:e.timestamp,length:13,isNull:!1}),()=>({type:e.timestamp,length:14,isNull:!1}),()=>({type:e.timestamp,length:0,isNull:!0}),()=>({type:e.symbol,length:0,isNull:!1}),()=>({type:e.symbol,length:1,isNull:!1}),()=>({type:e.symbol,length:2,isNull:!1}),()=>({type:e.symbol,length:3,isNull:!1}),()=>({type:e.symbol,length:4,isNull:!1}),()=>({type:e.symbol,length:5,isNull:!1}),()=>({type:e.symbol,length:6,isNull:!1}),()=>({type:e.symbol,length:7,isNull:!1}),()=>({type:e.symbol,length:8,isNull:!1}),()=>({type:e.symbol,length:9,isNull:!1}),()=>({type:e.symbol,length:10,isNull:!1}),()=>({type:e.symbol,length:11,isNull:!1}),()=>({type:e.symbol,length:12,isNull:!1}),()=>({type:e.symbol,length:13,isNull:!1}),()=>({type:e.symbol,length:14,isNull:!1}),()=>({type:e.symbol,length:0,isNull:!0}),()=>({type:e.string,length:0,isNull:!1}),()=>({type:e.string,length:1,isNull:!1}),()=>({type:e.string,length:2,isNull:!1}),()=>({type:e.string,length:3,isNull:!1}),()=>({type:e.string,length:4,isNull:!1}),()=>({type:e.string,length:5,isNull:!1}),()=>({type:e.string,length:6,isNull:!1}),()=>({type:e.string,length:7,isNull:!1}),()=>({type:e.string,length:8,isNull:!1}),()=>({type:e.string,length:9,isNull:!1}),()=>({type:e.string,length:10,isNull:!1}),()=>({type:e.string,length:11,isNull:!1}),()=>({type:e.string,length:12,isNull:!1}),()=>({type:e.string,length:13,isNull:!1}),()=>({type:e.string,length:14,isNull:!1}),()=>({type:e.string,length:0,isNull:!0}),()=>({type:e.clob,length:0,isNull:!1}),()=>({type:e.clob,length:1,isNull:!1}),()=>({type:e.clob,length:2,isNull:!1}),()=>({type:e.clob,length:3,isNull:!1}),()=>({type:e.clob,length:4,isNull:!1}),()=>({type:e.clob,length:5,isNull:!1}),()=>({type:e.clob,length:6,isNull:!1}),()=>({type:e.clob,length:7,isNull:!1}),()=>({type:e.clob,length:8,isNull:!1}),()=>({type:e.clob,length:9,isNull:!1}),()=>({type:e.clob,length:10,isNull:!1}),()=>({type:e.clob,length:11,isNull:!1}),()=>({type:e.clob,length:12,isNull:!1}),()=>({type:e.clob,length:13,isNull:!1}),()=>({type:e.clob,length:14,isNull:!1}),()=>({type:e.clob,length:0,isNull:!0}),()=>({type:e.blob,length:0,isNull:!1}),()=>({type:e.blob,length:1,isNull:!1}),()=>({type:e.blob,length:2,isNull:!1}),()=>({type:e.blob,length:3,isNull:!1}),()=>({type:e.blob,length:4,isNull:!1}),()=>({type:e.blob,length:5,isNull:!1}),()=>({type:e.blob,length:6,isNull:!1}),()=>({type:e.blob,length:7,isNull:!1}),()=>({type:e.blob,length:8,isNull:!1}),()=>({type:e.blob,length:9,isNull:!1}),()=>({type:e.blob,length:10,isNull:!1}),()=>({type:e.blob,length:11,isNull:!1}),()=>({type:e.blob,length:12,isNull:!1}),()=>({type:e.blob,length:13,isNull:!1}),()=>({type:e.blob,length:14,isNull:!1}),()=>({type:e.blob,length:0,isNull:!0}),()=>({type:e.list,length:0,isNull:!1}),()=>({type:e.list,length:1,isNull:!1}),()=>({type:e.list,length:2,isNull:!1}),()=>({type:e.list,length:3,isNull:!1}),()=>({type:e.list,length:4,isNull:!1}),()=>({type:e.list,length:5,isNull:!1}),()=>({type:e.list,length:6,isNull:!1}),()=>({type:e.list,length:7,isNull:!1}),()=>({type:e.list,length:8,isNull:!1}),()=>({type:e.list,length:9,isNull:!1}),()=>({type:e.list,length:10,isNull:!1}),()=>({type:e.list,length:11,isNull:!1}),()=>({type:e.list,length:12,isNull:!1}),()=>({type:e.list,length:13,isNull:!1}),()=>({type:e.list,length:14,isNull:!1}),()=>({type:e.list,length:0,isNull:!0}),()=>({type:e.sexp,length:0,isNull:!1}),()=>({type:e.sexp,length:1,isNull:!1}),()=>({type:e.sexp,length:2,isNull:!1}),()=>({type:e.sexp,length:3,isNull:!1}),()=>({type:e.sexp,length:4,isNull:!1}),()=>({type:e.sexp,length:5,isNull:!1}),()=>({type:e.sexp,length:6,isNull:!1}),()=>({type:e.sexp,length:7,isNull:!1}),()=>({type:e.sexp,length:8,isNull:!1}),()=>({type:e.sexp,length:9,isNull:!1}),()=>({type:e.sexp,length:10,isNull:!1}),()=>({type:e.sexp,length:11,isNull:!1}),()=>({type:e.sexp,length:12,isNull:!1}),()=>({type:e.sexp,length:13,isNull:!1}),()=>({type:e.sexp,length:14,isNull:!1}),()=>({type:e.sexp,length:0,isNull:!0}),()=>({type:e.struct,length:0,isNull:!1}),()=>({type:e.struct,length:14,isNull:!1}),()=>({type:e.struct,length:2,isNull:!1}),()=>({type:e.struct,length:3,isNull:!1}),()=>({type:e.struct,length:4,isNull:!1}),()=>({type:e.struct,length:5,isNull:!1}),()=>({type:e.struct,length:6,isNull:!1}),()=>({type:e.struct,length:7,isNull:!1}),()=>({type:e.struct,length:8,isNull:!1}),()=>({type:e.struct,length:9,isNull:!1}),()=>({type:e.struct,length:10,isNull:!1}),()=>({type:e.struct,length:11,isNull:!1}),()=>({type:e.struct,length:12,isNull:!1}),()=>({type:e.struct,length:13,isNull:!1}),()=>({type:e.struct,length:14,isNull:!1}),()=>({type:e.struct,length:0,isNull:!0}),()=>({type:e.bvm,length:3,isNull:!1}),()=>this.#t("0xe1"),()=>this.#t("0xe2"),()=>({type:e.annotation,length:3,isNull:!1}),()=>({type:e.annotation,length:4,isNull:!1}),()=>({type:e.annotation,length:5,isNull:!1}),()=>({type:e.annotation,length:6,isNull:!1}),()=>({type:e.annotation,length:7,isNull:!1}),()=>({type:e.annotation,length:8,isNull:!1}),()=>({type:e.annotation,length:9,isNull:!1}),()=>({type:e.annotation,length:10,isNull:!1}),()=>({type:e.annotation,length:11,isNull:!1}),()=>({type:e.annotation,length:12,isNull:!1}),()=>({type:e.annotation,length:13,isNull:!1}),()=>({type:e.annotation,length:14,isNull:!1}),()=>this.#t("0xef"),()=>this.#t("0xf0"),()=>this.#t("0xf1"),()=>this.#t("0xf2"),()=>this.#t("0xf3"),()=>this.#t("0xf4"),()=>this.#t("0xf5"),()=>this.#t("0xf6"),()=>this.#t("0xf7"),()=>this.#t("0xf8"),()=>this.#t("0xf9"),()=>this.#t("0xfa"),()=>this.#t("0xfb"),()=>this.#t("0xfc"),()=>this.#t("0xfd"),()=>this.#t("0xfe"),()=>this.#t("0xff")];#e=[()=>({type:e.nop,length:0,isNull:!1}),()=>({type:e.nop,length:1,isNull:!1}),()=>({type:e.nop,length:2,isNull:!1}),()=>({type:e.nop,length:3,isNull:!1}),()=>({type:e.nop,length:4,isNull:!1}),()=>({type:e.nop,length:5,isNull:!1}),()=>({type:e.nop,length:6,isNull:!1}),()=>({type:e.nop,length:7,isNull:!1}),()=>({type:e.nop,length:8,isNull:!1}),()=>({type:e.nop,length:9,isNull:!1}),()=>({type:e.nop,length:10,isNull:!1}),()=>({type:e.nop,length:11,isNull:!1}),()=>({type:e.nop,length:12,isNull:!1}),()=>({type:e.nop,length:13,isNull:!1}),()=>({type:e.nop,length:14,isNull:!1}),()=>({type:e.null,length:0,isNull:!0}),()=>({type:e.bool,length:0,isNull:!1,bool:!1}),()=>({type:e.bool,length:0,isNull:!1,bool:!0}),()=>this.#t("0x12"),()=>this.#t("0x13"),()=>this.#t("0x14"),()=>this.#t("0x15"),()=>this.#t("0x16"),()=>this.#t("0x17"),()=>this.#t("0x18"),()=>this.#t("0x19"),()=>this.#t("0x1a"),()=>this.#t("0x1b"),()=>this.#t("0x1c"),()=>this.#t("0x1d"),()=>this.#t("0x1e"),()=>({type:e.bool,length:0,isNull:!0}),()=>({type:e["int+"],length:0,isNull:!1}),()=>({type:e["int+"],length:1,isNull:!1}),()=>({type:e["int+"],length:2,isNull:!1}),()=>({type:e["int+"],length:3,isNull:!1}),()=>({type:e["int+"],length:4,isNull:!1}),()=>({type:e["int+"],length:5,isNull:!1}),()=>({type:e["int+"],length:6,isNull:!1}),()=>({type:e["int+"],length:7,isNull:!1}),()=>({type:e["int+"],length:8,isNull:!1}),()=>({type:e["int+"],length:9,isNull:!1}),()=>({type:e["int+"],length:10,isNull:!1}),()=>({type:e["int+"],length:11,isNull:!1}),()=>({type:e["int+"],length:12,isNull:!1}),()=>({type:e["int+"],length:13,isNull:!1}),()=>({type:e["int+"],length:14,isNull:!1}),()=>({type:e["int+"],length:0,isNull:!0}),()=>this.#t("0x30"),()=>({type:e["int-"],length:1,isNull:!1}),()=>({type:e["int-"],length:2,isNull:!1}),()=>({type:e["int-"],length:3,isNull:!1}),()=>({type:e["int-"],length:4,isNull:!1}),()=>({type:e["int-"],length:5,isNull:!1}),()=>({type:e["int-"],length:6,isNull:!1}),()=>({type:e["int-"],length:7,isNull:!1}),()=>({type:e["int-"],length:8,isNull:!1}),()=>({type:e["int-"],length:9,isNull:!1}),()=>({type:e["int-"],length:10,isNull:!1}),()=>({type:e["int-"],length:11,isNull:!1}),()=>({type:e["int-"],length:12,isNull:!1}),()=>({type:e["int-"],length:13,isNull:!1}),()=>({type:e["int-"],length:14,isNull:!1}),()=>({type:e["int-"],length:0,isNull:!0}),()=>({type:e.float,length:0,isNull:!1}),()=>this.#t("0x41"),()=>this.#t("0x42"),()=>this.#t("0x43"),()=>({type:e.float,length:4,isNull:!1}),()=>this.#t("0x45"),()=>this.#t("0x46"),()=>this.#t("0x47"),()=>({type:e.float,length:8,isNull:!1}),()=>this.#t("0x49"),()=>this.#t("0x4a"),()=>this.#t("0x4b"),()=>this.#t("0x4c"),()=>this.#t("0x4d"),()=>this.#t("0x4e"),()=>({type:e.float,length:0,isNull:!0}),()=>({type:e.decimal,length:0,isNull:!1}),()=>({type:e.decimal,length:1,isNull:!1}),()=>({type:e.decimal,length:2,isNull:!1}),()=>({type:e.decimal,length:3,isNull:!1}),()=>({type:e.decimal,length:4,isNull:!1}),()=>({type:e.decimal,length:5,isNull:!1}),()=>({type:e.decimal,length:6,isNull:!1}),()=>({type:e.decimal,length:7,isNull:!1}),()=>({type:e.decimal,length:8,isNull:!1}),()=>({type:e.decimal,length:9,isNull:!1}),()=>({type:e.decimal,length:10,isNull:!1}),()=>({type:e.decimal,length:11,isNull:!1}),()=>({type:e.decimal,length:12,isNull:!1}),()=>({type:e.decimal,length:13,isNull:!1}),()=>({type:e.decimal,length:14,isNull:!1}),()=>({type:e.decimal,length:0,isNull:!0}),()=>this.#t("0x60"),()=>this.#t("0x61"),()=>({type:e.timestamp,length:2,isNull:!1}),()=>({type:e.timestamp,length:3,isNull:!1}),()=>({type:e.timestamp,length:4,isNull:!1}),()=>({type:e.timestamp,length:5,isNull:!1}),()=>({type:e.timestamp,length:6,isNull:!1}),()=>({type:e.timestamp,length:7,isNull:!1}),()=>({type:e.timestamp,length:8,isNull:!1}),()=>({type:e.timestamp,length:9,isNull:!1}),()=>({type:e.timestamp,length:10,isNull:!1}),()=>({type:e.timestamp,length:11,isNull:!1}),()=>({type:e.timestamp,length:12,isNull:!1}),()=>({type:e.timestamp,length:13,isNull:!1}),()=>({type:e.timestamp,length:14,isNull:!1}),()=>({type:e.timestamp,length:0,isNull:!0}),()=>({type:e.symbol,length:0,isNull:!1}),()=>({type:e.symbol,length:1,isNull:!1}),()=>({type:e.symbol,length:2,isNull:!1}),()=>({type:e.symbol,length:3,isNull:!1}),()=>({type:e.symbol,length:4,isNull:!1}),()=>({type:e.symbol,length:5,isNull:!1}),()=>({type:e.symbol,length:6,isNull:!1}),()=>({type:e.symbol,length:7,isNull:!1}),()=>({type:e.symbol,length:8,isNull:!1}),()=>({type:e.symbol,length:9,isNull:!1}),()=>({type:e.symbol,length:10,isNull:!1}),()=>({type:e.symbol,length:11,isNull:!1}),()=>({type:e.symbol,length:12,isNull:!1}),()=>({type:e.symbol,length:13,isNull:!1}),()=>({type:e.symbol,length:14,isNull:!1}),()=>({type:e.symbol,length:0,isNull:!0}),()=>({type:e.string,length:0,isNull:!1}),()=>({type:e.string,length:1,isNull:!1}),()=>({type:e.string,length:2,isNull:!1}),()=>({type:e.string,length:3,isNull:!1}),()=>({type:e.string,length:4,isNull:!1}),()=>({type:e.string,length:5,isNull:!1}),()=>({type:e.string,length:6,isNull:!1}),()=>({type:e.string,length:7,isNull:!1}),()=>({type:e.string,length:8,isNull:!1}),()=>({type:e.string,length:9,isNull:!1}),()=>({type:e.string,length:10,isNull:!1}),()=>({type:e.string,length:11,isNull:!1}),()=>({type:e.string,length:12,isNull:!1}),()=>({type:e.string,length:13,isNull:!1}),()=>({type:e.string,length:14,isNull:!1}),()=>({type:e.string,length:0,isNull:!0}),()=>({type:e.clob,length:0,isNull:!1}),()=>({type:e.clob,length:1,isNull:!1}),()=>({type:e.clob,length:2,isNull:!1}),()=>({type:e.clob,length:3,isNull:!1}),()=>({type:e.clob,length:4,isNull:!1}),()=>({type:e.clob,length:5,isNull:!1}),()=>({type:e.clob,length:6,isNull:!1}),()=>({type:e.clob,length:7,isNull:!1}),()=>({type:e.clob,length:8,isNull:!1}),()=>({type:e.clob,length:9,isNull:!1}),()=>({type:e.clob,length:10,isNull:!1}),()=>({type:e.clob,length:11,isNull:!1}),()=>({type:e.clob,length:12,isNull:!1}),()=>({type:e.clob,length:13,isNull:!1}),()=>({type:e.clob,length:14,isNull:!1}),()=>({type:e.clob,length:0,isNull:!0}),()=>({type:e.blob,length:0,isNull:!1}),()=>({type:e.blob,length:1,isNull:!1}),()=>({type:e.blob,length:2,isNull:!1}),()=>({type:e.blob,length:3,isNull:!1}),()=>({type:e.blob,length:4,isNull:!1}),()=>({type:e.blob,length:5,isNull:!1}),()=>({type:e.blob,length:6,isNull:!1}),()=>({type:e.blob,length:7,isNull:!1}),()=>({type:e.blob,length:8,isNull:!1}),()=>({type:e.blob,length:9,isNull:!1}),()=>({type:e.blob,length:10,isNull:!1}),()=>({type:e.blob,length:11,isNull:!1}),()=>({type:e.blob,length:12,isNull:!1}),()=>({type:e.blob,length:13,isNull:!1}),()=>({type:e.blob,length:14,isNull:!1}),()=>({type:e.blob,length:0,isNull:!0}),()=>({type:e.list,length:0,isNull:!1}),()=>({type:e.list,length:1,isNull:!1}),()=>({type:e.list,length:2,isNull:!1}),()=>({type:e.list,length:3,isNull:!1}),()=>({type:e.list,length:4,isNull:!1}),()=>({type:e.list,length:5,isNull:!1}),()=>({type:e.list,length:6,isNull:!1}),()=>({type:e.list,length:7,isNull:!1}),()=>({type:e.list,length:8,isNull:!1}),()=>({type:e.list,length:9,isNull:!1}),()=>({type:e.list,length:10,isNull:!1}),()=>({type:e.list,length:11,isNull:!1}),()=>({type:e.list,length:12,isNull:!1}),()=>({type:e.list,length:13,isNull:!1}),()=>({type:e.list,length:14,isNull:!1}),()=>({type:e.list,length:0,isNull:!0}),()=>({type:e.sexp,length:0,isNull:!1}),()=>({type:e.sexp,length:1,isNull:!1}),()=>({type:e.sexp,length:2,isNull:!1}),()=>({type:e.sexp,length:3,isNull:!1}),()=>({type:e.sexp,length:4,isNull:!1}),()=>({type:e.sexp,length:5,isNull:!1}),()=>({type:e.sexp,length:6,isNull:!1}),()=>({type:e.sexp,length:7,isNull:!1}),()=>({type:e.sexp,length:8,isNull:!1}),()=>({type:e.sexp,length:9,isNull:!1}),()=>({type:e.sexp,length:10,isNull:!1}),()=>({type:e.sexp,length:11,isNull:!1}),()=>({type:e.sexp,length:12,isNull:!1}),()=>({type:e.sexp,length:13,isNull:!1}),()=>({type:e.sexp,length:14,isNull:!1}),()=>({type:e.sexp,length:0,isNull:!0}),()=>({type:e.struct,length:0,isNull:!1}),()=>({type:e.struct,length:14,isNull:!1}),()=>({type:e.struct,length:2,isNull:!1}),()=>({type:e.struct,length:3,isNull:!1}),()=>({type:e.struct,length:4,isNull:!1}),()=>({type:e.struct,length:5,isNull:!1}),()=>({type:e.struct,length:6,isNull:!1}),()=>({type:e.struct,length:7,isNull:!1}),()=>({type:e.struct,length:8,isNull:!1}),()=>({type:e.struct,length:9,isNull:!1}),()=>({type:e.struct,length:10,isNull:!1}),()=>({type:e.struct,length:11,isNull:!1}),()=>({type:e.struct,length:12,isNull:!1}),()=>({type:e.struct,length:13,isNull:!1}),()=>({type:e.struct,length:14,isNull:!1}),()=>({type:e.struct,length:0,isNull:!0}),()=>({type:e.bvm,length:3,isNull:!1}),()=>({type:e.inline_annotation,length:14,isNull:!1}),()=>({type:e.inline_annotation,length:14,isNull:!1}),()=>({type:e.annotation,length:3,isNull:!1}),()=>({type:e.annotation,length:4,isNull:!1}),()=>({type:e.annotation,length:5,isNull:!1}),()=>({type:e.annotation,length:6,isNull:!1}),()=>({type:e.annotation,length:7,isNull:!1}),()=>({type:e.annotation,length:8,isNull:!1}),()=>({type:e.annotation,length:9,isNull:!1}),()=>({type:e.annotation,length:10,isNull:!1}),()=>({type:e.annotation,length:11,isNull:!1}),()=>({type:e.annotation,length:12,isNull:!1}),()=>({type:e.annotation,length:13,isNull:!1}),()=>({type:e.annotation,length:14,isNull:!1}),()=>this.#t("0xef"),()=>({type:e.template,length:14,isNull:!1}),()=>({type:e.template,length:14,isNull:!1}),()=>({type:e.template,length:14,isNull:!1}),()=>({type:e.inline_symbol,length:14,isNull:!1}),()=>({type:e.inline_fieldname,length:14,isNull:!1}),()=>this.#t("0xf5"),()=>this.#t("0xf6"),()=>this.#t("0xf7"),()=>this.#t("0xf8"),()=>this.#t("0xf9"),()=>this.#t("0xfa"),()=>this.#t("0xfb"),()=>this.#t("0xfc"),()=>this.#t("0xfd"),()=>this.#t("0xfe"),()=>this.#t("0xff")];#i;#r;#n=t=>{throw new Error(t)};#s=this.#n;#t=t=>{this.#s(`Invalid Ion T/L pair ${t}.`)};constructor(t){t instanceof $t.ByteReader||this.#s("TypeDescriptorReader expected byteReader to be a ByteReader."),this.#i=t}readTypeAndLength(t,l){this.#i.setPosition(t);let i=this.#i.nextByte();if(i===null)return null;i===void 0&&this.notifier.error("typeAndLengthyByte is undefined");let n;switch(l){case"1_0":n=this.#l;break;case"1_1":case"unknown":n=this.#e;break;default:this.notifier.error("unknown context");break}let s=n[i]();if(s.type===e.bvm&&(s.majorVersion=this.#i.nextByte(),s.minorVersion=this.#i.nextByte(),this.#i.skipBytes(-2)),s.length===14){let a=this.#i.readVarUInt(this.#s);if(a===null)return this.#i.skipBytes(-1),null;typeof a.magnitude=="bigint"?s.length=BigInt(a.numBytesRead)+a.magnitude:s.length=a.numBytesRead+a.magnitude,s.varUIntLength=a.numBytesRead,s.isVarUInt=!0,i===209&&(s.isSortedStruct=!0)}if(s.type===e.annotation){let a=this.#i.readVarUInt(this.#s);if(a===null)return s.varUIntLength!==void 0?this.#i.skipBytes(-1*(1+s.varUIntLength)):this.#i.skipBytes(-1),null;s.annotationsLength=a.magnitude,s.annotationsVarUIntLength=a.numBytesRead}return s}readFieldName(t){return this.#i.setPosition(t),this.#i.readVarUInt(this.#s)}setPosition(t){this.#i.setPosition(t)}setErrorHandler(t){typeof errorHandler!="function"&&this.#s(`TypeDescriptorReader setErrorHandler passed a ${typeof t} instead of function.`),this.#s=t}};Z.TypeDescriptorReader=J});var k=x(K=>{"use strict";var vt=L(),S=B().IonTypes,Yt=w(),Q=class{#l;#e;#i=function(t,l,i,n){i.setPosition(t);let s=i.readUInt(l,n).magnitude;return l>3&&s===0n||s===0,s};#r=function(t,l,i,n){i.setPosition(t);let s=i.readUInt(l,n).magnitude;return(l>3&&s===0n||s===0)&&n("readNegativeInt() zero not a valid negative int value."),-s};#n=function(t,l,i,n){l!==0&&l!==4&&l!==8&&l!==15&&n(`ScalarValueReader illegal float length ${l}.`);let s=new Uint8Array(l);i.setPosition(t);for(let h=0;h<l;++h)if(s[h]=i.nextByte(),s[h]===null)return i.skipBytes(-1*h),null;let a;switch(l){case 0:return 0;case 4:return a=new DataView(s.buffer),a.getFloat32(0,!1);case 8:return a=new DataView(s.buffer),a.getFloat64(0,!1);case 15:return null;default:}};#s=function(t,l,i,n){i.setPosition(t);let s=i.readVarInt(n);if(s===null)return null;let a=l-s.numBytesRead,h;if(a<0&&n("ScalarValueReader illegal coefficient length."),a===0)h={magnitude:0,numBytesRead:0,isNegative:!1};else{if(h=i.readInt(a,n),h===null)return i.skipBytes(-1*s.numBytesRead),null;h.isNegative===!1&&(h.magnitude===0||h.magnitude===0n)}return{exponent:s,coefficient:h}};#t=function(t,l,i,n){i.setPosition(t);let s=l,a,h,p,y,d,o,u,g,c;if(a=i.readVarInt(n),a===null)return null;if(s-=a.numBytesRead,h=i.readVarUInt(n),h===null)return i.skipBytes(-1*(l-s)),null;if(s-=h.numBytesRead,s>0){if(p=i.readVarUInt(n),p===null)return i.skipBytes(-1*(l-s)),null;s-=p.numBytesRead}if(s>0){if(y=i.readVarUInt(n),y===null)return i.skipBytes(-1*(l-s)),null;s-=y.numBytesRead}if(s>0){if(d=i.readVarUInt(n),d===null)return i.skipBytes(-1*(l-s)),null;if(s-=d.numBytesRead,s>0){if(o=i.readVarUInt(n),o===null)return i.skipBytes(-1*(l-s)),null;s-=o.numBytesRead}else n("ScalarValueReader hours present without minutes.")}if(s>0){if(u=i.readVarUInt(n),u===null)return i.skipBytes(-1*(l-s)),null;s-=u.numBytesRead}if(s>0){if(g=i.readVarInt(n),g===null)return i.skipBytes(-1*(l-s)),null;s-=g.numBytesRead}if(s>0){if(c=i.readInt(s,n),c===null)return i.skipBytes(-1*(l-s)),null}else g!==void 0&&(c={numBytesRead:0,magnitude:0,isNegative:!1});return{offset:a,year:h,month:p,day:y,hour:d,minute:o,second:u,fractionExponent:g,fractionCoefficient:c}};#o=function(t,l,i,n){if(l<1)return 0;i.setPosition(t);let s=i.readUInt(l,n);return s===null?null:s.magnitude};#f=function(t,l,i,n){let s=new Uint8Array(l);i.setPosition(t);for(let a=0;a<l;++a)if(s[a]=i.nextByte(),s[a]===null)return i.skipBytes(-1*a),null;return this.#l.decode(s)};#a=function(t,l,i){let n=new Uint8Array(l);i.setPosition(t);for(let s=0;s<l;++s)if(n[s]=i.nextByte(),n[s]===null)return i.skipBytes(-1*s),null;return n};#y=function(t,l,i){let n=new Uint8Array(l);i.setPosition(t);for(let s=0;s<l;++s)if(n[s]=i.nextByte(),n[s]===null)return i.skipBytes(-1*s),null;return n};#g=t=>{throw new Error(t)};#h;#p=this.#g;constructor(t){t instanceof vt.ByteReader||this.#p("ScalarValueReader expected byteReader to be a ByteReader."),this.#e=t,this.#l=new TextDecoder("utf-8");let l=this;this.#h=new Array(S.numTypes);for(let i=0;i<S.numTypes;++i)this.#h[i]=function(n,s){l.#p(`ScalarValueReader called on ${S.nameFromType(i)}, a non-scalar.`)};this.#h[S["int+"]]=this.#i,this.#h[S["int-"]]=this.#r,this.#h[S.float]=this.#n,this.#h[S.decimal]=this.#s,this.#h[S.timestamp]=this.#t,this.#h[S.symbol]=this.#o,this.#h[S.string]=this.#f,this.#h[S.clob]=this.#a,this.#h[S.blob]=this.#y}read(t,l,i){return this.#h[t]===void 0&&this.#p(`ScalarValueReader read() called with non-existant type ${t}.`),(!Number.isInteger(l)||l<0)&&this.#p(`ScalarValueReader read() called with invalid position ${l}.`),(!Number.isInteger(i)||i<=0)&&this.#p(`ScalarValueReader read() called with invalid length ${i}.`),this.#h[t].apply(this,[l,i,this.#e,this.#p])}setErrorHandler(t){typeof errorHandler!="function"&&this.#p(`ScalarValueReader setErrorHandler passed a ${typeof t} instead of function.`),this.#p=t}};K.ScalarValueReader=Q});var T=x(Y=>{"use strict";var N=B().IonTypes,tt=class{#l;#e;#i;#r;#n;#s=!1;#t=!1;#o;#f;#a=0;#y=0;#g=0;#h=0;#p=0;#b=0;#u=0;#m=0;#d=0;#c=null;#N=null;#I=null;#S=null;#B=null;#$=null;#x=!1;#v=!1;#E=null;#R=()=>{this.#l=void 0,this.#e=void 0,this.#i=void 0,this.#r=void 0,this.#n=void 0,this.#s=!1,this.#t=!1,this.#o=void 0,this.#f=void 0,this.#a=0,this.#y=0,this.#g=0,this.#h=0,this.#p=0,this.#b=0,this.#u=0,this.#m=0,this.#d=0,this.#c=null,this.#N=null,this.#I=null,this.#S=null,this.#B=null,this.#$=null,this.#x=!1,this.#v=!1};#w=(t,l,i,n,s,a)=>{if(Number.isInteger(t)&&t>=0)this.#u=t;else throw new Error(`IonElement initialize passed invalid positionInStream ${t}.`);if(Number.isInteger(l)&&l>=0)this.#i=l;else throw new Error(`IonElement initialize passed invalid depth ${l}.`);if(Number.isInteger(i)&&i>=0)this.#m=i;else throw new Error(`IonElement initialize passed invalid bytesRemainingAtDepth ${i}.`);if(Number.isInteger(n)&&n>=0)this.#c=n;else if(n==null)this.#c=null;else throw new Error(`IonElement initialize passed invalid container ${n}.`);if(Number.isInteger(s)&&s>=0)this.#N=s;else if(s==null)this.#N=null;else throw new Error(`IonElement initialize passed invalid containerType ${s}.`);if(Number.isInteger(a)&&a>=0)this.#I=a;else if(a==null)this.#I=null;else throw new Error(`IonElement initialize passed invalid previous ${a}.`);this.#r=[]};constructor(t,l,i,n,s,a){this.#w(t,l,i,n,s,a)}toString(){return`{ #type: ${this.#l}, 
              #isSystemElement: ${this.#x},
              #isNull: ${this.#e},
              #isLocalSymbolTable: ${this.#s},
              #isSharedSymbolTable: ${this.#t},
              #depth: ${this.#i},
              #annotations: ${this.#r},
              #length: ${this.#a},
              #varUIntLength: ${this.#y},
              #fieldNameVarUIntLength: ${this.#d},
              #fieldNameSymbolID: ${this.#n},
              #annotationsLength: ${this.#p},
              #annotationsVarUIntLength: ${this.#b},
              #lengthWithoutAnnotations: ${this.#g},
              #positionInStream: ${this.#u},
              #bytesRemainingAtDepth: ${this.#m},
              #container: ${this.#c},
              #containerType: ${this.#N},
              #contains: ${this.#S},
              #next: ${this.#B},
              #previous: ${this.#I},
              bytePositionOfRepresentation: ${this.bytePositionOfRepresentation},
              isContainer: ${this.isContainer},
              positionInStream: ${this.positionInStream} }`}repurpose(t,l,i,n,s,a){this.#R(),this.#w(t,l,i,n,s,a)}readTypeDescriptor(t,l){if(this.#m<=0)throw new Error(`readTypeDescriptor called with invalid bytesRemainingAtDepth ${this.#m}`);let i=this.#u,n;if(this.#c!==null&&this.#N===N.struct){if(n=t.readFieldName(i),n===null)return null;i+=n.numBytesRead}let s=t.readTypeAndLength(i,l);if(s===null)return t.setPosition(this.#u),null;this.#a=s.length||0;let a;if(s.type===N.annotation){if(a=s,!Number.isInteger(a.annotationsVarUIntLength)||!Number.isInteger(a.annotationsLength))throw new Error("Annotation missing 'annot_length' field data.");if(a.annotationsLength===0)throw new Error("'annot_length' field must be greater than zero.");let d=a.annotationsLength,o=i+1+(a.varUIntLength||0)+a.annotationsVarUIntLength,u;do{if(u=t.readFieldName(o),u===null)return t.setPosition(this.#u),null;this.#r.push(u),o+=u.numBytesRead,d-=u.numBytesRead}while(d>0);let g=this.#r[0],c=i+1+(a.varUIntLength||0)+a.annotationsVarUIntLength+a.annotationsLength;if(s=t.readTypeAndLength(c,l),s===null)return t.setPosition(this.#u),null;if(s.type===N.annotation)throw new Error("Annotations cannot wrap annotations.");if(s.type===N.nop)throw new Error("Annotations cannot wrap nop.");if(g.magnitude===3||g.magnitude===9){if(this.#i>0)throw new Error("Symbol table annotation is not at depth 0.");if(s.type!==N.struct)throw new Error("Symbol table annotation is not wrapping struct.");g.magnitude===3?this.#s=!0:this.#t=!0,this.#E=g,this.#x=!0}s.annotationsVarUIntLength=a.annotationsVarUIntLength,s.annotationsLength=a.annotationsLength,s.varUIntLengthWithAnnotations=a.varUIntLength}if(s.type===N.bvm){if(this.#i!==0)throw new Error(`BVM encountered at depth ${this.#i}`);this.#x=!0,this.#o=s.majorVersion,this.#f=s.minorVersion}if(s.type===N.nop&&(this.#x=!0),s.type===N.struct&&s.isSortedStruct&&(this.#v=!0,s.length-s.varUIntLength==0))throw new Error("Sorted struct with no length.");s.lengthWithoutAnnotations=s.length,this.#l=s.type,this.#e=s.isNull,this.#y=s.varUIntLength||0,this.#p=s.annotationsLength||0,this.#b=s.annotationsVarUIntLength||0,this.#g=s.lengthWithoutAnnotations||0,this.#h=s.varUIntLengthWithAnnotations||0,n&&(this.#n=n.magnitude,this.#d=n.numBytesRead),this.#l===N.bool&&(this.#$=s.bool);let h;typeof this.#a=="bigint"||typeof this.#d=="bigint"?h=1n+BigInt(this.#a)+BigInt(this.#d):h=1+this.#a+this.#d,N.isContainer(this.#l)&&this.#g!==0&&this.#e===!1&&(typeof h=="bigint"?this.#S=[this.bytePositionOfRepresentation,this.#i+1,h-BigInt(this.bytePositionOfRepresentation-this.#u),this.positionInStream,this.#l,null]:this.#S=[this.bytePositionOfRepresentation,this.#i+1,h-(this.bytePositionOfRepresentation-this.#u),this.positionInStream,this.#l,null]);let p;if(typeof h=="bigint"){if(p=BigInt(this.#m)-h,p>0n)this.#B=[BigInt(this.#u)+h,this.#i,p,this.#c,this.#N,this.positionInStream];else if(p<0n)return t.setPosition(this.#u),null}else if(p=this.#m-h,p>0)this.#B=[this.#u+h,this.#i,p,this.#c,this.#N,this.positionInStream];else if(p<0)return t.setPosition(this.#u),null;let y="";for(let d=0;d<this.#i;++d)y+="  "}get bytePositionOfRepresentation(){return this.#l===N.bvm||this.#l===N.nop||this.#g===0||this.#e?null:this.#u+this.#d+(this.#p>0?1+this.#h+this.#b+this.#p:0)+1+this.#y}get bytePositionOfAnnotations(){return this.#p>0?this.#u+(this.#d+1+this.#h+this.#b):null}get isContainer(){return N.isContainer(this.#l)}get isScalar(){return N.isScalar(this.#l)}get isNull(){return this.#e}get containsElement(){return this.#S}get nextElement(){return this.#B}get previousElement(){return this.#I}get positionInStream(){return this.#u}get depth(){return this.#i}get container(){return this.#c}get containerType(){return this.#N}get totalLength(){let t;return typeof this.#a=="bigint"?t=BigInt(this.#d)+1n+this.#a:t=this.#d+1+this.#a,t}get length(){return this.#a}get lengthWithoutAnnotations(){return this.#g}get type(){return this.#l}get majorVersion(){return this.#o}get minorVersion(){return this.#f}get fieldNameSymbolID(){return this.#n}get annotations(){return this.#r}get annotationsLength(){return this.#p}get annotationsVarUIntLength(){return this.#b}get varUIntLengthWithAnnotations(){return this.#h}get varUIntLength(){return this.#y}get boolRepresentation(){return this.#$}get isSystemElement(){return this.#x}get isSorted(){return this.#v}get isLocalSymbolTable(){return this.#s}get isSharedSymbolTable(){return this.#t}get firstAnnotation(){return this.#E}get bytesRemainingAtDepth(){return this.#m}get fieldNameVarUIntLength(){return this.#d}get nibblePositionStruct(){let t={},l=0;if(t.offset=this.#u,t.depth=this.depth,typeof this.totalLength=="bigint"?t.totalNibbles=this.totalLength*2n:t.totalNibbles=this.totalLength*2,this.#n===void 0)t.fieldName=null;else{let s={};s.symbolMagnitude=this.fieldNameSymbolID,s.nibbles={},s.nibbles.symbolStart=l,s.nibbles.symbolEnd=l+this.fieldNameVarUIntLength*2-1,t.fieldName=s,l=s.nibbles.symbolEnd+1}if(this.annotationsLength===0)t.annotation={};else{let s={},a={};a.type=l,l+=1,a.wrapperLengthStart=l,a.wrapperLengthEnd=l+this.#h*2,l=a.wrapperLengthEnd+1,a.annotationsLengthStart=l,a.annotationsLengthEnd=l+this.#b*2-1,l=a.annotationsLengthEnd+1,s.wrapperLengthValue=this.#a,s.lengthValue=this.annotationsLength;let h=[];for(let p=0;p<this.annotations.length;++p){let y={};y.nibbles={},y.nibbles.symbolStart=l,y.nibbles.symbolEnd=l+this.annotations[p].numBytesRead*2-1,l=y.nibbles.symbolEnd+1,y.symbolMagnitude=this.annotations[p].magnitude,h.push(y)}s.nibbles=a,s.annotations=h,t.annotation=s}let i={},n={};if(n.type=l,l+=1,n.lengthStart=l,n.lengthEnd=l+this.varUIntLength*2,l=n.lengthEnd+1,l!==t.totalNibbles)if(l<t.totalNibbles)n.representationStart=l,n.representationEnd=t.totalNibbles-1;else throw new Error(`nibblePositionStruct has invalid position ${postion} out of ${t.totalNibbles} for representationLength`);return i.typeValue=this.type,i.typeName=N.nameFromType(this.type),i.lengthValue=this.lengthWithoutAnnotations-this.varUIntLength,i.totalLength=this.totalLength,i.nibbles=n,t.element=i,t}};Y.IonElement=tt});var P=x(et=>{"use strict";var le=B().IonTypes,lt=class{#l=1e4;#e=this.#l;#i=1;#r=null;#n;#s;#t;#o;#f=t=>{this.#i+t>this.#e&&(this.#n.push(new Array(this.#l)),this.#s!==void 0&&this.#s.push(new Array(this.#l)),this.#t!==void 0&&(this.#t.push(new Array(this.#l)),this.#o.push(new Array(this.#l))))};#a=t=>{let l=t-this.#l,i=1;for(;l>=this.#l;)l-=this.#l,i++;return{array:i,symbol:l}};constructor(t,l,i,n,s){if(this.#n=[new Array(this.#l)],l===!0&&(this.#s=[new Array(this.#l)]),i===!0&&(this.#t=[new Array(this.#l)],this.#o=[new Array(this.#l)]),t===!0)switch(s===void 0&&(s=0),n){case"1_0":this.addSymbol("$ion",s),this.addSymbol("$ion_1_0",s),this.addSymbol("$ion_symbol_table",s),this.addSymbol("name",s),this.addSymbol("version",s),this.addSymbol("imports",s),this.addSymbol("symbols",s),this.addSymbol("max_id",s),this.addSymbol("$ion_shared_symbol_table",s);break;case"1_1":this.addSymbol("$ion",s),this.addSymbol("$ion_1_0",s),this.addSymbol("$ion_symbol_table",s),this.addSymbol("name",s),this.addSymbol("version",s),this.addSymbol("imports",s),this.addSymbol("symbols",s),this.addSymbol("max_id",s),this.addSymbol("$ion_shared_symbol_table",s),this.addSymbol("templates",s),this.addSymbol("max_template_id",s);break;default:throw new Error(`SymbolTable passed invalid context ${n}`)}}addSymbol(t,l){if(this.#f(1),this.#i<this.#l)this.#n[0][this.#i]=t,l!==void 0&&this.#s!==void 0&&(this.#s[0][this.#i]=l);else{let n=this.#a(this.#i);this.#n[n.array][n.symbol]=t,l!==void 0&&this.#s!==void 0&&(this.#s[n.array][n.symbol]=l)}let i=this.#i;return this.#i++,i}addUsage(t,l){if(!this.#t)throw new Error(`SymbolTable addUsage(${t}, ${l}) called with no usage enabled.`);if(t<this.#l)this.#t[0][t]===void 0?(this.#t[0][t]=[l],this.#o[0][t]=1):(this.#t[0][t].push(l),this.#o[0][t]++);else{let i=this.#a(this.#i);this.#t[i.array][i.symbol]===void 0?(this.#t[i.array][i.symbol]=[l],this.#o[i.array][i.symbol]=1):(this.#t[i.array][i.symbol].push(l),this.#o[i.array][i.symbol]++)}}getSymbolValue(t,l){if(t<this.#l){if(l!==void 0&&this.#s[0][t]>l)throw new Error(`${this.#s[0][t]} > ${l}`);return this.#n[0][t]}let i=this.#a(this.#i);if(l!==void 0&&this.#s[i.array][i.symbol]>l)throw new Error(`${this.#s[i.array][i.symbol]} > ${l}`);return this.#n[i.array][i.symbol]}getSymbolUsage(t){if(t<this.#l)return this.#t[0][t];let l=this.#a(this.#i);return this.#t[l.array][l.symbol]}getSymbolUsageCount(t){if(t<this.#l)return this.#o[0][t];let l=this.#a(this.#i);return this.#o[l.array][l.symbol]}getSymbolID(t){for(let l=0;l<this.#n.length;++l)for(let i=0;i<this.#n[l].length;++i)if(t===this.#n[l][i])return l*this.#l+i;return null}get symbols(){let t=[];for(let l=0;l<this.#n.length;++l)for(let i=0;i<this.#n[l].length;++i)this.#n[l][i]!==void 0&&t.push(this.#n[l][i]);return t}get meta(){let t=[];for(let l=0;l<this.#n.length;++l)for(let i=0;i<this.#n[l].length;++i)this.#n[l][i]!==void 0&&t.push(this.#s[l][i]);return t}get usage(){let t=[];for(let l=0;l<this.#n.length;++l)for(let i=0;i<this.#n[l].length;++i)this.#n[l][i]!==void 0&&t.push(this.#t[l][i]);return t}get usageCounts(){let t=[];for(let l=0;l<this.#n.length;++l)for(let i=0;i<this.#n[l].length;++i)this.#n[l][i]!==void 0&&t.push(this.#o[l][i]);return t}};et.SymbolTable=lt});var C=x(it=>{"use strict";var se=T().IonElement,v=B().IonTypes,st=class{#l=10;#e={topLevelCount:0,nulls:{count:0},maxDepth:{value:null,offset:[],count:0},maxAnnotations:{value:null,offset:[],count:0},symbolTable:{local:{count:0},shared:{count:0},append:{count:0},inline:{}},templates:{}};constructor(){for(let t=0;t<v.numTypes;++t)this.#e.nulls[v.nameFromType(t)]={count:0},this.#e[v.nameFromType(t)]={byteCount:0,maxBytes:{value:null,offset:[],count:0},minBytes:{value:null,offset:[],count:0},maxDepth:{value:null,offset:[],count:0},depthCount:[],count:0}}trackElement(t,l){let i=this.#e[v.nameFromType(t.type)],n=t.lengthWithoutAnnotations,s=t.positionInStream+(l===void 0?0:l);for(i===void 0&&console.log(t.toString()),t.depth===0&&this.#e.topLevelCount++,i.count++,i.byteCount+=n,n>i.maxBytes.value||i.maxBytes.value===null?(i.maxBytes.value=n,i.maxBytes.offset=[s],i.maxBytes.count=1):n===i.maxBytes.value&&(i.count<this.#l&&i.maxBytes.offset.push(s),i.maxBytes.count++),n<i.minBytes.value||i.minBytes.value===null?(i.minBytes.value=n,i.minBytes.offset=[s],i.minBytes.count=1):n===i.minBytes.value&&(i.count<this.#l&&i.minBytes.offset.push(s),i.minBytes.count++),t.depth>i.maxDepth.value||i.maxDepth.value===null?(i.maxDepth.value=t.depth,i.maxDepth.offset=[s],i.maxDepth.count=1):t.depth===i.maxDepth.value&&(i.count<this.#l&&i.maxDepth.offset.push(s),i.maxDepth.count++),t.depth>this.#e.maxDepth.value||this.#e.maxDepth.value===null?(this.#e.maxDepth.value=t.depth,this.#e.maxDepth.offset=[s],this.#e.maxDepth.count=1):t.depth===this.#e.maxDepth.value&&(this.#e.maxDepth.offset.length<this.#l&&this.#e.maxDepth.offset.push(s),this.#e.maxDepth.count++);i.depthCount.length<t.depth+1;)i.depthCount.push(0);i.depthCount[t.depth]++,t.annotationsLength>0&&(t.annotations.length>this.#e.maxAnnotations.value||this.#e.maxAnnotations.value===null?(this.#e.maxAnnotations.value=t.annotations.length,this.#e.maxAnnotations.offset=[s],this.#e.maxAnnotations.count=1):t.annotations.length===this.#e.maxAnnotations.value&&(this.#e.maxAnnotations.offset.length<this.#l&&this.#e.maxAnnotations.offset.push(s),this.#e.maxAnnotations.count++),this.trackElement({depth:t.depth,positionInStream:s,lengthWithoutAnnotations:t.annotationsLength,type:v.annotation,isNull:!1})),t.isNull===!0&&(this.#e.nulls.count++,this.#e.nulls[v.nameFromType(t.type)].count++)}combineStats(t){this.#e.nulls.count+=t.nulls.count,this.#e.topLevelCount+=t.topLevelCount,this.#e.maxDepth.value===t.maxDepth.value?(this.#e.maxDepth.offset=this.#e.maxDepth.offset.concat(t.maxDepth.offset),this.#e.maxDepth.count+=t.maxDepth.count):this.#e.maxDepth.value>t.maxDepth.value||this.#e.maxDepth.value<t.maxDepth.value&&(this.#e.maxDepth.offset=t.maxDepth.offset,this.#e.maxDepth.count=t.maxDepth.count,this.#e.maxDepth.value=t.maxDepth.value),this.#e.maxAnnotations.value===t.maxAnnotations.value?(this.#e.maxAnnotations.offset=this.#e.maxAnnotations.offset.concat(t.maxAnnotations.offset),this.#e.maxAnnotations.count+=t.maxAnnotations.count):this.#e.maxAnnotations.value>t.maxAnnotations.value||this.#e.maxAnnotations.value<t.maxAnnotations.value&&(this.#e.maxAnnotations.offset=t.maxAnnotations.offset,this.#e.maxAnnotations.count=t.maxAnnotations.count,this.#e.maxAnnotations.value=t.maxAnnotations.value);for(let l=0;l<v.numTypes;++l){let i=v.nameFromType(l);this.#e.nulls[i].count+=t.nulls[i].count,this.#e[i].byteCount+=t[i].byteCount;let n=this.#e[i],s=t[i];n.count+=s.count,n.maxBytes.value===s.maxBytes.value?(n.maxBytes.offset=n.maxBytes.offset.concat(s.maxBytes.offset),n.maxBytes.count+=s.maxBytes.count):n.maxBytes.value>s.maxBytes.value||n.maxBytes.value<s.maxBytes.value&&(n.maxBytes.offset=s.maxBytes.offset,n.maxBytes.count=s.maxBytes.count,n.maxBytes.value=s.maxBytes.value),n.minBytes.value===s.minBytes.value?(n.minBytes.offset=n.minBytes.offset.concat(s.minBytes.offset),n.minBytes.count+=s.minBytes.count):n.minBytes.value<s.minBytes.value||n.minBytes.value>s.minBytes.value&&(n.minBytes.offset=s.minBytes.offset,n.minBytes.count=s.minBytes.count,n.minBytes.value=s.minBytes.value);for(let a=0;a<s.depthCount.length;++a)n.depthCount.length===a&&n.depthCount.push(0),n.depthCount[a]+=s.depthCount[a];n.maxDepth.value===s.maxDepth.value?(n.maxDepth.offset=n.maxDepth.offset.concat(s.maxDepth.offset),n.maxDepth.count+=s.maxDepth.count):n.maxDepth.value>s.maxDepth.value||n.maxDepth.value<s.maxDepth.value&&(n.maxDepth.offset=s.maxDepth.offset,n.maxDepth.count=s.maxDepth.count,n.maxDepth.value=s.maxDepth.value)}}addSymbolTable(t){t.shared===!0?this.#e.symbolTable.shared.count++:t.append===!0?this.#e.symbolTable.append.count++:this.#e.symbolTable.local.count++}get stats(){return this.#e}};it.StructuralAnalyzer=st});var ot=x(nt=>{"use strict";var f=B().IonTypes,ae=T().IonElement,re=P().SymbolTable,oe=k(),at=w(),rt=class{#l;#e;#i;#r=t=>{let l=null;if(this.#i.length===0)return`$${t}`;if(l=this.#i[0].getSymbolValue(t),l!==void 0)return l;for(let i=1;i<this.#i.length;++i)if(l=this.#i[i].getSymbolValue(t),l!==void 0)return l};#n=t=>{let l=[];if(t.depth>0&&l.push(["Depth",t.depth,t.depth*2]),t.fieldNameVarUIntLength>0&&l.push(["Field name",`$${t.fieldNameSymbolID}`,t.fieldNameVarUIntLength*2]),t.annotationsLength>0){l.push(["Type","Annotation",1]),l.push(["Length",t.length-t.varUIntLengthWithAnnotations,1+t.varUIntLengthWithAnnotations*2]),l.push(["Length of Annotations",t.annotationsVarUIntLength,t.annotationsVarUIntLength*2]);for(let i=0;i<t.annotations.length;++i)l.push(["Annotation",`$${t.annotations[i].magnitude}`,t.annotations[i].numBytesRead*2])}return f.nameFromType(t.type)==="bvm"?(l.push(["Type",f.nameFromType(t.type),2]),l.push(["Major Version",1,2]),l.push(["Minor Version",0,2]),l.push(["BVM","End",2]),l):(l.push(["Type",f.nameFromType(t.type),1]),l.push(["Length",t.lengthWithoutAnnotations-t.varUIntLength,1+t.varUIntLength*2]),l)};#s=t=>{let l;if(t.isNull)return l=`null.${f.nameFromType(t.type)}`,(t.type===f["int+"]||t.type===f["int-"])&&(l="null.int"),l;if(t.isScalar){let i="";switch(t.bytePositionOfRepresentation===null?i=t.varUIntLength:i=at.readScalarFromElement(t,this.#e),l=i,t.type){case f.bool:l=t.boolRepresentation;break;case f.string:l=`"${i}"`;break;case f.symbol:l=this.#r(i),l===void 0&&(l="$0");break;case f.decimal:i!==0?l=`${i.coefficient.magnitude}d${i.exponent.magnitude}`:l=i;break;case f.timestamp:l=`${i.year.magnitude}`,i.month!==void 0&&(l+=`-${i.month.magnitude}`),i.day!==void 0?(l+=`-${i.day.magnitude}T`,i.hour!==void 0&&(l+=`${i.hour.magnitude}:${i.minute.magnitude}`,i.second!==void 0&&(l+=`:${i.second.magnitude}`,i.fractionCoefficient!==void 0&&(l+=`.${i.fractionCoefficient.magnitude}`)))):l+="T",i.offset.isNegative===!1?l+=`+${i.offset.magnitude}`:l+=`-${i.offset.magnitude}`;break}}else if(t.isContainer)switch(t.type){case f.struct:l="{";break;case f.list:l="[";break;case f.sexp:l="(";break}else l="?";return l};#t=t=>{let l=new Array(4);if(l[0]=[null,"",t.depth*2],t.fieldNameSymbolID){let n=this.#r(t.fieldNameSymbolID);l[1]=[null,n,t.fieldNameVarUIntLength*2]}l[2]=[];for(let n=0;n<t.annotations.length;++n){let s=this.#r(t.annotations[n].magnitude);l[2].push([null,s,t.annotations[n].numBytesRead*2])}let i=t.positionInStream+t.totalLength-t.bytePositionOfRepresentation;return t.isScalar?t.bytePositionOfRepresentation!==null?l[3]=[null,this.#s(t),i*2]:l[3]=[null,this.#s(t),2]:l[3]=[null,this.#s(t),2],l};constructor(t,l,i){this.#l=t,this.#e=l,i!==void 0?this.#i=[...i]:this.#i=[]}printElementToString(t,l){let i="";for(let o=0;o<t.depth;++o)i+="\xB7";let n="";t.fieldNameSymbolID&&(n=this.#r(t.fieldNameSymbolID)+": ");let s="";for(let o=0;o<t.annotations.length;++o)s+=this.#r(t.annotations[o].magnitude)+"::";let a="",h="",p="";if(t.isNull)a=`null.${f.nameFromType(t.type)}`,(t.type===f["int+"]||t.type===f["int-"])&&(a="null.int");else if(t.isScalar){let o="";t.bytePositionOfRepresentation===null?o=t.varUIntLength:o=at.readScalarFromElement(t,this.#e);let u=o;if(t.type===f.bool)u=`${t.boolRepresentation}`;else if(t.type===f.string)u=`"${o}"`;else if(t.type===f.symbol){let g=this.#r(o);g===void 0&&(g="$0"),u=`${g}`,p=` <${o}>`}else t.type===f.timestamp?(u=`${o.year.magnitude}`,o.month!==void 0&&(u+=`-${o.month.magnitude}`),o.day!==void 0?(u+=`-${o.day.magnitude}`,o.hour!==void 0?(u+=`T${o.hour.magnitude}:${o.minute.magnitude}`,o.second!==void 0&&(u+=`:${o.second.magnitude}`,o.fractionCoefficient!==void 0&&(u+=`.${o.fractionCoefficient.magnitude}`))):u+="T"):u+="T",o.offset.isNegative===!1?u+=`+${o.offset.magnitude}`:u+=`-${o.offset.magnitude}`):t.type===f.decimal&&o!==0&&(u=`${o.coefficient.magnitude}d${o.exponent.magnitude}`);a=`${u}`,h=` // scalar(${f.nameFromType(t.type)})`}else if(t.isContainer){let o="";t.type===f.struct?o="{":t.type===f.list?o="[":t.type===f.sexp&&(o="("),a=`${o}`,h=` // container(${f.nameFromType(t.type)})`}else a="?",h=` // special(${f.nameFromType(t.type)})`;let y="";t.depth!==0&&t.isContainer===!1&&(y=",");let d=`${t.isSystemElement===!0?" [system]":""}`;return`${i}${n}${s}${a}${y}${h}${p}${d}`}printContainerEndToString(t){if(!t.isContainer)throw new Error(`IonElementTextWriter printContainerEndToString(${f.nameFromType(t.type)})`);let l="";for(let s=0;s<t.depth;++s)l+="\xB7";let i="";t.type===f.struct?i="}":t.type===f.list?i="]":t.type===f.sexp&&(i=")");let n="";return t.depth!==0&&(n=","),`${l}${i}${n}`}printElementToAnnotatedString(t,l){let i="",n="",s=t.totalLength,a=`
 ${"".padStart(12," ")}| `,h=`${a}`,p="",y=this.#n(t),d="";for(let m=0;m<y.length;++m)d+=`${a}${p}+-> ${y[m][0]}: ${y[m][1]}`,p+="|".padEnd(y[m][2]," "),h+=`${"|".padEnd(y[m][2]-1,"-")}${y[m][2]>1?"\\":""}`;if(t.isContainer&&t.bytePositionOfRepresentation!==null&&(s=t.bytePositionOfRepresentation-t.positionInStream),s>l.length)throw new Error("IonElementTextWriter has invalid data.");for(let m=0;m<t.depth;++m)i+="\xB7\xB7";for(let m=0;m<s;++m)n+=`${l[m].toString(16).padStart(2,"0")}`;let o=`
 ${(""+t.positionInStream).padStart(12,"0")}| ${i}${n}`,u=this.#t(t),g="",c=`${a}`,I=0,E=null,R=null;if(c+="".padEnd(u[0][2]," "),u[1]!==void 0&&(c+="".padEnd(u[1][2],"!"),E=I,I+=u[1][2]),u[2].length>0){let m=(t.bytePositionOfAnnotations-t.positionInStream)*2-I;c+="".padEnd(m," "),I+=m,R=I;for(let U=0;U<u[2].length;++U)c+="".padEnd(u[2][U][2],"@"),I+=u[2][U][2]}let A=(t.bytePositionOfRepresentation-t.positionInStream)*2-I;t.bytePositionOfRepresentation===null&&(A=0),(t.isContainer||t.isNull)&&(A=(t.bytePositionOfRepresentation-t.positionInStream-1-t.varUIntLength)*2-I),I+=A,c+="".padEnd(A," "),c+="|",c+="".padEnd(u[3][2]-2,"-"),u[3][2]>1&&(c+="/"),g=`${a}${"".padEnd(u[0][2]," ")}`,g+=`${E!==null?"|":""}`,g+=`${R!==null?"".padEnd(R-(E!==null?1:0)," ")+"|"+"".padEnd(I-R-1):"".padEnd(E!==null?I-1:I," ")}`,g+=`+-> ${u[3][1]}`;let D="";R!==null&&(D+=`${a}${"".padEnd(u[0][2]," ")}`,D+=`${E!==null?"|":""}`,D+=`${"".padEnd(R-(E!==null?1:0)," ")+"+- "+u[2][0][1]+"::"}`);let q="";return E!==null&&(q+=`${a}${"".padEnd(u[0][2]," ")}`,q+=`+- ${u[1][1]}:`),`${d}${h}${o}${c}${g}${D}${q}
`}};nt.IonElementTextWriter=rt});var yt=x(ht=>{"use strict";var Et=V(),wt=k(),Rt=T().IonElement,Lt=P().SymbolTable,ut=w(),Tt=C().StructuralAnalyzer,ft=B().IonTypes,At=ot().IonElementTextWriter,pt=class{#l;#e=0;#i;#r;#n;#s;#t;#o;#f;#a;#y=null;#g=function(){this.#o=[],this.#f=!1,this.#a=!1;for(let t=0;t<100;++t)this.#o.push(new Rt(0,0,this.#e,null,null,null));this.#y=this.#o[0]};constructor(t){if(t===void 0)throw new Error("ValueStreamReader passed an undefined reader.");if(this.#l=t,this.#e=this.#l.size,this.#i=new Et.TypeDescriptorReader(this.#l),this.#r=new wt.ScalarValueReader(this.#l),this.#s=new Lt(!0,!0,!0),this.#n=new Tt,this.#t=new At(this.#i,this.#r,[this.#s]),this.#l.atEnd())throw new Error("TODO: empty file");this.#g()}readTopLevelTLPairs(t,l){let i=t,n=null,s=0,a=null;do{if(a=this.#i.readTypeAndLength(i),a===null)break;s=i,i=i+1+a.length}while(i<l);return s}readAll(){let t=this.#y;for(;;){this.#y=t;try{if(t.readTypeDescriptor(this.#i)===null)return t.length?t.length:100;this.#n.trackElement(t)}catch(l){throw console.log(`Error! currentElement: ${t.toString()}`),l}if((t.isLocalSymbolTable===!0||t.isSharedSymbolTable===!0)&&(this.#f=!0),this.#f===!0&&(t.depth===1&&t.fieldNameSymbolID===7?this.#a=!0:t.depth===2&&this.#a===!0&&t.type===ft.string&&this.#s.addSymbol(ut.readScalarFromElement(t,this.#r),t.positionInStream)),t.fieldNameSymbolID!==void 0&&this.#s.addUsage(t.fieldNameSymbolID,t.bytePositionOfRepresentation||t.positionInStream),t.type===ft.symbol){let l=t.bytePositionOfRepresentation===null?t.varUIntLength:ut.readScalarFromElement(t,this.#r);this.#s.addUsage(l,t.bytePositionOfRepresentation||t.positionInStream)}if(t.firstAnnotation!==null&&this.#s.addUsage(t.firstAnnotation.magnitude,t.positionInStream),t.isScalar&&!t.isNull&&t.lengthWithoutAnnotations!==0,t.isContainer&&!t.isNull&&t.length!==0){let l=t.containsElement;t=this.#o[l[1]],t.repurpose(l[0],l[1],l[2],l[3],l[4],l[5])}else if(t.nextElement)t.repurpose(t.nextElement[0],t.nextElement[1],t.nextElement[2],t.nextElement[3],t.nextElement[4],t.nextElement[5]);else{for(;t.depth>0&&(t=this.#o[t.depth-1],t.nextElement===null););if(this.#f===!0&&t.depth===0&&(this.#f=!1),this.#a===!0&&t.depth<2&&(this.#a=!1),t.nextElement)t.repurpose(t.nextElement[0],t.nextElement[1],t.nextElement[2],t.nextElement[3],t.nextElement[4],t.nextElement[5]);else{if(!this.#l.atEnd(t.positionInStream+t.totalLength))throw new Error("Not at end of stream");t=void 0;break}}}}};ht.ValueStreamReader=pt});var mt=x(gt=>{"use strict";var Dt=L(),fe=yt(),dt=class extends Dt.ByteReader{#l;#e;#i=1;#r=-1;#n;#s;#t;#o;#f=t=>{};#a=0;#y=async()=>{let t=this.#l.slice(this.#r,this.#r+this.#i);this.#n=await this.#o(t),this.#s=new Uint8Array(this.#n)};#g=async(t,l)=>{let i=!1;this.#r===-1&&(this.#r=0,i=!0),l!==void 0?(i=!0,this.#r=l):(this.#a<this.#r||this.#a+t>=this.#r+this.#i-1)&&(i=!0,this.#r=this.#a),i&&await this.#y()};constructor(t){super();this.#t=new FileReader;let l=this;if(this.#o=i=>new Promise(s=>{l.#t.onloadend=a=>{s(l.#t.result),l.#f(a)},l.#t.readAsArrayBuffer(i)}),Number.isInteger(t)&&t>0)this.#i=t;else if(t!==void 0)throw new Error("ByteSliceReader constructor called with invalid bufferSize")}loadFile(t){if(!(t instanceof File))throw new Error(`ByteSliceReader loadFile() passed invalid filePath File ${t}.`);return this.#l=t,this.#e=t.size,this.#e}nextByte(){if(this.atEnd())return null;let t=this.#a-this.#r;if(t<0||this.#s===void 0||t>=this.#s.length)return null;let l=this.#s[t];if(l===void 0)throw new Error(`nextByte byte is undefined at ${t} and ${this.#a}`);return this.#a++,l}skipBytes(t){this.#a+=t}setPosition(t){this.#a=t}setBufferSize(t){if(Number.isInteger(t)&&t>0)this.#i=t;else if(t!==void 0)throw new Error(`ByteSliceReader setBufferSize called with invalid bufferSize ${t}`)}async fillBuffer(t,l){Number.isInteger(t)&&t>0&&t<=this.#i&&(this.setPosition(l),await this.#g(t,l))}atEnd(t){if(t===void 0&&(t=this.#a),t===this.#e)return!0;if(t>this.#e)throw new Error(`ByteSliceReader atEnd() asked to skip beyond end of file. ${t} > ${this.#e}`);return!1}get size(){return this.#e}get positionInFile(){return this.#a}get biBuffer(){return this.#n}get isReady(){return this.#t.readyState===2}set readerOnLoadEndCallback(t){this.#f=t}rawBytes(t,l){return this.#s.slice(t-this.#r,t-this.#r+l)}};gt.ByteSliceReader=dt});var bt=x(ct=>{"use strict";var ye=V().TypeDescriptorReader,ge=O().ByteBufferReader,de=T().IonElement,Ut=w(),b=B().IonTypes,F=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],Vt=r=>{let t=new Array(Math.ceil(r.length*4/3));for(let l=0;l<r.length;l+=3){let i=r[l],n=r[l+1],s=r[l+2],a=r[l+3];if(t[l*4/3]=F[i>>>2],t[l*4/3+1]=F[i<<4&63|(n||0)>>>4],l+1<r.length)if(t[l*4/3+2]=F[n<<2&63|(s||0)>>>6],l+2<r.length)t[l*4/3+3]=F[s&63];else return t.join("")+"=";else return t.join("")+"=="}return t.join("")},Nt=class{#l=[];#e=(t,l,i)=>{let n="";if(t.isNull)return n=`null.${b.nameFromType(t.type)}`,(t.type===b["int+"]||t.type===b["int-"])&&(n="null.int"),{representation:n,details:""};let s;if(t.isScalar){let a;switch(t.bytePositionOfRepresentation===null?a=t.varUIntLength:a=Ut.readScalarFromElement(t,l),n=a,t.type){case b.bool:n=t.boolRepresentation;break;case b.string:n=`${a}`;break;case b.symbol:n=`$${a}`,s=a;break;case b.decimal:a!==0?(n=`${a.coefficient.magnitude}d${a.exponent.magnitude}`,s=a):n=`${a}d0`;break;case b.timestamp:n=`${(""+a.year.magnitude).padStart(4,"0")}`,s=a,a.month!==void 0&&(n+=`-${(""+a.month.magnitude).padStart(2,"0")}`),a.day!==void 0?(n+=`-${(""+a.day.magnitude).padStart(2,"0")}T`,a.hour!==void 0&&(n+=`${(""+a.hour.magnitude).padStart(2,"0")}:${(""+a.minute.magnitude).padStart(2,"0")}`,a.second!==void 0&&(n+=`:${(""+a.second.magnitude).padStart(2,"0")}`,a.fractionCoefficient!==void 0&&(n+=`.${(""+a.fractionCoefficient.magnitude).padStart(-1*a.fractionExponent.magnitude,"0")}`)))):n+="T",a.offset.isNegative===!1?n+=`+${(""+Math.floor(a.offset.magnitude/60)).padStart(2,"0")}:${(""+a.offset.magnitude%60).padStart(2,"0")}`:Object.is(a.offset.magnitude,-0)&&(n+=`-${(""+Math.floor(-1*a.offset.magnitude/60)).padStart(2,"0")}:${(""+-1*a.offset.magnitude%60).padStart(2,"0")}`);break;case b.clob:n=`{{"${a}"}}`;break;case b.blob:if(t.length>0){let h=t.bytePositionOfRepresentation-t.positionInStream;n=`{{${Vt(i.subarray(h,i.length))}}}`}else n="{{}}";break}}else if(t.isContainer)switch(t.type){case b.struct:n="{";break;case b.list:n="[";break;case b.sexp:n="(";break}else switch(t.type){case b.bvm:n=void 0,s={major:t.majorVersion,minor:t.minorVersion};break;case b.nop:n=void 0;break;default:n="?";break}return{representation:n,details:s}};constructor(){this.#l=[]}inspectElement(t,l,i,n,s){let a=t.nibblePositionStruct;a.byteNibbles="";for(let p=0;p<l.length;++p)a.byteNibbles+=`${l[p].toString(16).padStart(2,"0")}`;let h=this.#e(t,i,l);if(a.nibblesToDisplay=n*2,a.element.representation=h.representation,a.element.details=h.details,a.offset+=s,a.containersToClose=[],t.isContainer&&a.element.lengthValue===0&&!t.isNull&&(a.containersToClose.push(a.element.typeName),a.isZeroLengthContainer=!0),t.depth>0&&(a.parentOffset=t.container+s,t.bytesRemainingAtDepth===t.totalLength&&!(t.isContainer&&a.element.lengthValue!==0))){a.isLastElementAtDepth=!0;let p=t.depth,y=a.parentOffset,d=a.offset+a.element.totalLength;for(let o=this.#l.length-1;o>=0;--o)if(this.#l[o].offset===y)if(this.#l[o].offset+this.#l[o].element.totalLength===d){if(a.containersToClose.push(this.#l[o].element.typeName),p--,p===0)break;y=this.#l[o].parentOffset}else break}this.#l.push(a)}get nibblesToDisplay(){return this.#l}};ct.Inspector=Nt});var It=x((ce,xt)=>{"use strict";var kt=O().ByteBufferReader,Pt=L().ByteReader,Ft=mt().ByteSliceReader,qt=T().IonElement,Ot=B().IonTypes,_t=w(),Ct=k().ScalarValueReader,zt=P().SymbolTable,Wt=V().TypeDescriptorReader,jt=C().StructuralAnalyzer,Mt=bt().Inspector;xt.exports={ByteBufferReader:kt,ByteReader:Pt,ByteSliceReader:Ft,IonElement:qt,IonTypes:Ot,utilities:_t,ScalarValueReader:Ct,SymbolTable:zt,TypeDescriptorReader:Wt,Inspector:Mt,Analyzer:jt}});return It();})();
