var BITE=(()=>{var m=(r,t)=>()=>(t||(t={exports:{}},r(t.exports,t)),t.exports);var w=m(X=>{"use strict";var z=class{constructor(){}nextByte(){return null}skipBytes(t){return null}setPosition(t){return null}atEnd(t){}size(){}readVarUInt(t){let s=0,l=0,n;do{if(n=this.nextByte(),n===null)return this.skipBytes(-1*s),null;s++,s===5&&(l=BigInt(l)),s>4?l=l<<7n|BigInt(n&127):l=l<<7|n&127}while(!(n&128));return s>4&&(l>Number.MAX_SAFE_INTEGER?console.log(`||NOTICE|| VarUInt > 4 bytes and magnitude (${l}) > Number.MAX_SAFE_INTEGER (${Number.MAX_SAFE_INTEGER}); not all readers support large VarUInts.`):(console.log(`||NOTICE|| VarUInt > 4 bytes and magnitude (${l}) <= Number.MAX_SAFE_INTEGER (${Number.MAX_SAFE_INTEGER}); not all readers support large VarUInts.`),l=Number(l))),{numBytesRead:s,magnitude:l}}readUInt(t,s){let l=0,n=0,i;do{if(i=this.nextByte(),i===null)return this.skipBytes(-1*l),null;l++,l===4&&(n=BigInt(n)),l>3?n=n<<8n|BigInt(i):n=n<<8|i}while(l<t);return l>4&&(n>Number.MAX_SAFE_INTEGER?console.log(`||NOTICE|| UInt > 4 bytes and magnitude (${n}) > Number.MAX_SAFE_INTEGER (${Number.MAX_SAFE_INTEGER}); not all readers support large UInts.`):(console.log(`||NOTICE|| UInt > 4 bytes and magnitude (${n}) <= Number.MAX_SAFE_INTEGER (${Number.MAX_SAFE_INTEGER}); not all readers support large UInts.`),n=Number(n))),{numBytesRead:l,magnitude:n}}readVarInt(t){let s=0,l=0,n,i;do{if(i=this.nextByte(),i===null)return this.skipBytes(-1*s),null;s++,s===5&&(l=BigInt(l)),s===1?(n=(i&64)!=0,l=i&63):s>4?l=l<<7n|BigInt(i&127):l=l<<7|i&127}while(!(i&128));return s>4&&(l>Number.MAX_SAFE_INTEGER?console.log(`||NOTICE|| VarInt > 4 bytes and magnitude (${l}) > Number.MAX_SAFE_INTEGER (${Number.MAX_SAFE_INTEGER}); not all readers support large VarInts.`):(console.log(`||NOTICE|| VarInt > 4 bytes and magnitude (${l}) <= Number.MAX_SAFE_INTEGER (${Number.MAX_SAFE_INTEGER}); not all readers support large VarInts.`),l=Number(l))),{numBytesRead:s,magnitude:n===!0?-l:l,isNegative:n}}readInt(t,s){let l=0,n=0,i,a;do{if(a=this.nextByte(),a===null)return this.skipBytes(-1*l),null;l++,l===4&&(n=BigInt(n)),l===1?(i=(a&128)!=0,n=n<<7|a&127):l>3?n=n<<8n|BigInt(a):n=n<<8|a}while(l<t);return l>4&&(n>Number.MAX_SAFE_INTEGER?console.log(`||NOTICE|| Int > 4 bytes and magnitude (${n}) > Number.MAX_SAFE_INTEGER (${Number.MAX_SAFE_INTEGER}); not all readers support large Ints.`):(console.log(`||NOTICE|| Int > 4 bytes and magnitude (${n}) <= Number.MAX_SAFE_INTEGER (${Number.MAX_SAFE_INTEGER}); not all readers support large Ints.`),n=Number(n))),{numBytesRead:l,magnitude:i===!0?-n:n,isNegative:i}}};X.ByteReader=z});var C=m(j=>{"use strict";var Lt=w(),H=class extends Lt.ByteReader{#l=null;#e=null;#s=0;constructor(){super()}loadBuffer(t){if(this.#l=t,this.#l===null||this.#l===void 0)throw new Error(`ByteBufferReader loadBuffer() called with a ${this.#l} buffer.`);if(this.#l instanceof ArrayBuffer)this.#e=new Uint8Array(this.#l);else if(this.#l instanceof Uint8Array)this.#e=this.#l;else throw new Error("ByteBufferReader loadBuffer() called with an unsupported buffer type.");return this.#e.length}nextByte(){if(this.atEnd())return null;if(typeof this.#s=="bigint"){if(this.#s+1n>this.#e.length)return null}else if(this.#s+1>this.#e.length)return null;let t=this.#e[this.#s];return this.#s++,t}skipBytes(t){this.#s+=t}setPosition(t){this.#s=t}atEnd(t){if(typeof t=="bigint"){if(t===BigInt(this.#e.length))return!0;if(t>BigInt(this.#e.length))return null}else{if(t===this.#e.length)return!0;if(t>this.#e.length)return null}return!1}rawBytes(t,s){return this.#e.slice(t,t+s)}get positionInBuffer(){return this.#s}get size(){return this.#e.length}};j.ByteBufferReader=H});var E=m(Z=>{"use strict";var M={null:0,bool:1,"int+":2,"int-":3,float:4,decimal:5,timestamp:6,symbol:7,string:8,clob:9,blob:10,list:11,sexp:12,struct:13,annotation:14,reserved:15,bvm:16,nop:17,template:18,inline_annotation:19,inline_symbol:20,inline_fieldname:21,numTypes:22,isContainer:function(r){return r===this.list||r===this.sexp||r===this.struct},isScalar:function(r){return r===this.null||r===this.bool||r===this["int+"]||r===this["int-"]||r===this.float||r===this.decimal||r===this.timestamp||r===this.symbol||r===this.string||r===this.clob||r===this.blob||r===this.inline_symbol},nameFromType:function(r){return J[r]}},J=new Array(M.numTypes);for(let[r,t]of Object.entries(M))r!=="numTypes"&&(J[t]=r);Z.IonTypes=M});var v=m(K=>{"use strict";var S=E().IonTypes,Vt=(r,t)=>{if(t==null)throw new Error("readScalar called with no scalarReader");if(!(r.type===S["int+"]||r.type===S["int-"]||r.type===S.float||r.type===S.decimal||r.type===S.timestamp||r.type===S.symbol||r.type===S.string||r.type===S.clob||r.type===S.blob))throw new Error(`readScalar called with a non-scalar type ${r.type}`);return t.read(r.type,r.bytePositionOfRepresentation,r.lengthWithoutAnnotations-r.varUIntLength)};K.readScalarFromElement=Vt});var D=m(Q=>{"use strict";var Ut=w(),pe=v(),e=E().IonTypes,Y=class{#l=[()=>({type:e.nop,length:0,isNull:!1}),()=>({type:e.nop,length:1,isNull:!1}),()=>({type:e.nop,length:2,isNull:!1}),()=>({type:e.nop,length:3,isNull:!1}),()=>({type:e.nop,length:4,isNull:!1}),()=>({type:e.nop,length:5,isNull:!1}),()=>({type:e.nop,length:6,isNull:!1}),()=>({type:e.nop,length:7,isNull:!1}),()=>({type:e.nop,length:8,isNull:!1}),()=>({type:e.nop,length:9,isNull:!1}),()=>({type:e.nop,length:10,isNull:!1}),()=>({type:e.nop,length:11,isNull:!1}),()=>({type:e.nop,length:12,isNull:!1}),()=>({type:e.nop,length:13,isNull:!1}),()=>({type:e.nop,length:14,isNull:!1}),()=>({type:e.null,length:0,isNull:!0}),()=>({type:e.bool,length:0,isNull:!1,bool:!1}),()=>({type:e.bool,length:0,isNull:!1,bool:!0}),()=>this.#t("0x12"),()=>this.#t("0x13"),()=>this.#t("0x14"),()=>this.#t("0x15"),()=>this.#t("0x16"),()=>this.#t("0x17"),()=>this.#t("0x18"),()=>this.#t("0x19"),()=>this.#t("0x1a"),()=>this.#t("0x1b"),()=>this.#t("0x1c"),()=>this.#t("0x1d"),()=>this.#t("0x1e"),()=>({type:e.bool,length:0,isNull:!0}),()=>({type:e["int+"],length:0,isNull:!1}),()=>({type:e["int+"],length:1,isNull:!1}),()=>({type:e["int+"],length:2,isNull:!1}),()=>({type:e["int+"],length:3,isNull:!1}),()=>({type:e["int+"],length:4,isNull:!1}),()=>({type:e["int+"],length:5,isNull:!1}),()=>({type:e["int+"],length:6,isNull:!1}),()=>({type:e["int+"],length:7,isNull:!1}),()=>({type:e["int+"],length:8,isNull:!1}),()=>({type:e["int+"],length:9,isNull:!1}),()=>({type:e["int+"],length:10,isNull:!1}),()=>({type:e["int+"],length:11,isNull:!1}),()=>({type:e["int+"],length:12,isNull:!1}),()=>({type:e["int+"],length:13,isNull:!1}),()=>({type:e["int+"],length:14,isNull:!1}),()=>({type:e["int+"],length:0,isNull:!0}),()=>this.#t("0x30"),()=>({type:e["int-"],length:1,isNull:!1}),()=>({type:e["int-"],length:2,isNull:!1}),()=>({type:e["int-"],length:3,isNull:!1}),()=>({type:e["int-"],length:4,isNull:!1}),()=>({type:e["int-"],length:5,isNull:!1}),()=>({type:e["int-"],length:6,isNull:!1}),()=>({type:e["int-"],length:7,isNull:!1}),()=>({type:e["int-"],length:8,isNull:!1}),()=>({type:e["int-"],length:9,isNull:!1}),()=>({type:e["int-"],length:10,isNull:!1}),()=>({type:e["int-"],length:11,isNull:!1}),()=>({type:e["int-"],length:12,isNull:!1}),()=>({type:e["int-"],length:13,isNull:!1}),()=>({type:e["int-"],length:14,isNull:!1}),()=>({type:e["int-"],length:0,isNull:!0}),()=>({type:e.float,length:0,isNull:!1}),()=>this.#t("0x41"),()=>this.#t("0x42"),()=>this.#t("0x43"),()=>({type:e.float,length:4,isNull:!1}),()=>this.#t("0x45"),()=>this.#t("0x46"),()=>this.#t("0x47"),()=>({type:e.float,length:8,isNull:!1}),()=>this.#t("0x49"),()=>this.#t("0x4a"),()=>this.#t("0x4b"),()=>this.#t("0x4c"),()=>this.#t("0x4d"),()=>this.#t("0x4e"),()=>({type:e.float,length:0,isNull:!0}),()=>({type:e.decimal,length:0,isNull:!1}),()=>({type:e.decimal,length:1,isNull:!1}),()=>({type:e.decimal,length:2,isNull:!1}),()=>({type:e.decimal,length:3,isNull:!1}),()=>({type:e.decimal,length:4,isNull:!1}),()=>({type:e.decimal,length:5,isNull:!1}),()=>({type:e.decimal,length:6,isNull:!1}),()=>({type:e.decimal,length:7,isNull:!1}),()=>({type:e.decimal,length:8,isNull:!1}),()=>({type:e.decimal,length:9,isNull:!1}),()=>({type:e.decimal,length:10,isNull:!1}),()=>({type:e.decimal,length:11,isNull:!1}),()=>({type:e.decimal,length:12,isNull:!1}),()=>({type:e.decimal,length:13,isNull:!1}),()=>({type:e.decimal,length:14,isNull:!1}),()=>({type:e.decimal,length:0,isNull:!0}),()=>this.#t("0x60"),()=>this.#t("0x61"),()=>({type:e.timestamp,length:2,isNull:!1}),()=>({type:e.timestamp,length:3,isNull:!1}),()=>({type:e.timestamp,length:4,isNull:!1}),()=>({type:e.timestamp,length:5,isNull:!1}),()=>({type:e.timestamp,length:6,isNull:!1}),()=>({type:e.timestamp,length:7,isNull:!1}),()=>({type:e.timestamp,length:8,isNull:!1}),()=>({type:e.timestamp,length:9,isNull:!1}),()=>({type:e.timestamp,length:10,isNull:!1}),()=>({type:e.timestamp,length:11,isNull:!1}),()=>({type:e.timestamp,length:12,isNull:!1}),()=>({type:e.timestamp,length:13,isNull:!1}),()=>({type:e.timestamp,length:14,isNull:!1}),()=>({type:e.timestamp,length:0,isNull:!0}),()=>({type:e.symbol,length:0,isNull:!1}),()=>({type:e.symbol,length:1,isNull:!1}),()=>({type:e.symbol,length:2,isNull:!1}),()=>({type:e.symbol,length:3,isNull:!1}),()=>({type:e.symbol,length:4,isNull:!1}),()=>({type:e.symbol,length:5,isNull:!1}),()=>({type:e.symbol,length:6,isNull:!1}),()=>({type:e.symbol,length:7,isNull:!1}),()=>({type:e.symbol,length:8,isNull:!1}),()=>({type:e.symbol,length:9,isNull:!1}),()=>({type:e.symbol,length:10,isNull:!1}),()=>({type:e.symbol,length:11,isNull:!1}),()=>({type:e.symbol,length:12,isNull:!1}),()=>({type:e.symbol,length:13,isNull:!1}),()=>({type:e.symbol,length:14,isNull:!1}),()=>({type:e.symbol,length:0,isNull:!0}),()=>({type:e.string,length:0,isNull:!1}),()=>({type:e.string,length:1,isNull:!1}),()=>({type:e.string,length:2,isNull:!1}),()=>({type:e.string,length:3,isNull:!1}),()=>({type:e.string,length:4,isNull:!1}),()=>({type:e.string,length:5,isNull:!1}),()=>({type:e.string,length:6,isNull:!1}),()=>({type:e.string,length:7,isNull:!1}),()=>({type:e.string,length:8,isNull:!1}),()=>({type:e.string,length:9,isNull:!1}),()=>({type:e.string,length:10,isNull:!1}),()=>({type:e.string,length:11,isNull:!1}),()=>({type:e.string,length:12,isNull:!1}),()=>({type:e.string,length:13,isNull:!1}),()=>({type:e.string,length:14,isNull:!1}),()=>({type:e.string,length:0,isNull:!0}),()=>({type:e.clob,length:0,isNull:!1}),()=>({type:e.clob,length:1,isNull:!1}),()=>({type:e.clob,length:2,isNull:!1}),()=>({type:e.clob,length:3,isNull:!1}),()=>({type:e.clob,length:4,isNull:!1}),()=>({type:e.clob,length:5,isNull:!1}),()=>({type:e.clob,length:6,isNull:!1}),()=>({type:e.clob,length:7,isNull:!1}),()=>({type:e.clob,length:8,isNull:!1}),()=>({type:e.clob,length:9,isNull:!1}),()=>({type:e.clob,length:10,isNull:!1}),()=>({type:e.clob,length:11,isNull:!1}),()=>({type:e.clob,length:12,isNull:!1}),()=>({type:e.clob,length:13,isNull:!1}),()=>({type:e.clob,length:14,isNull:!1}),()=>({type:e.clob,length:0,isNull:!0}),()=>({type:e.blob,length:0,isNull:!1}),()=>({type:e.blob,length:1,isNull:!1}),()=>({type:e.blob,length:2,isNull:!1}),()=>({type:e.blob,length:3,isNull:!1}),()=>({type:e.blob,length:4,isNull:!1}),()=>({type:e.blob,length:5,isNull:!1}),()=>({type:e.blob,length:6,isNull:!1}),()=>({type:e.blob,length:7,isNull:!1}),()=>({type:e.blob,length:8,isNull:!1}),()=>({type:e.blob,length:9,isNull:!1}),()=>({type:e.blob,length:10,isNull:!1}),()=>({type:e.blob,length:11,isNull:!1}),()=>({type:e.blob,length:12,isNull:!1}),()=>({type:e.blob,length:13,isNull:!1}),()=>({type:e.blob,length:14,isNull:!1}),()=>({type:e.blob,length:0,isNull:!0}),()=>({type:e.list,length:0,isNull:!1}),()=>({type:e.list,length:1,isNull:!1}),()=>({type:e.list,length:2,isNull:!1}),()=>({type:e.list,length:3,isNull:!1}),()=>({type:e.list,length:4,isNull:!1}),()=>({type:e.list,length:5,isNull:!1}),()=>({type:e.list,length:6,isNull:!1}),()=>({type:e.list,length:7,isNull:!1}),()=>({type:e.list,length:8,isNull:!1}),()=>({type:e.list,length:9,isNull:!1}),()=>({type:e.list,length:10,isNull:!1}),()=>({type:e.list,length:11,isNull:!1}),()=>({type:e.list,length:12,isNull:!1}),()=>({type:e.list,length:13,isNull:!1}),()=>({type:e.list,length:14,isNull:!1}),()=>({type:e.list,length:0,isNull:!0}),()=>({type:e.sexp,length:0,isNull:!1}),()=>({type:e.sexp,length:1,isNull:!1}),()=>({type:e.sexp,length:2,isNull:!1}),()=>({type:e.sexp,length:3,isNull:!1}),()=>({type:e.sexp,length:4,isNull:!1}),()=>({type:e.sexp,length:5,isNull:!1}),()=>({type:e.sexp,length:6,isNull:!1}),()=>({type:e.sexp,length:7,isNull:!1}),()=>({type:e.sexp,length:8,isNull:!1}),()=>({type:e.sexp,length:9,isNull:!1}),()=>({type:e.sexp,length:10,isNull:!1}),()=>({type:e.sexp,length:11,isNull:!1}),()=>({type:e.sexp,length:12,isNull:!1}),()=>({type:e.sexp,length:13,isNull:!1}),()=>({type:e.sexp,length:14,isNull:!1}),()=>({type:e.sexp,length:0,isNull:!0}),()=>({type:e.struct,length:0,isNull:!1}),()=>({type:e.struct,length:14,isNull:!1}),()=>({type:e.struct,length:2,isNull:!1}),()=>({type:e.struct,length:3,isNull:!1}),()=>({type:e.struct,length:4,isNull:!1}),()=>({type:e.struct,length:5,isNull:!1}),()=>({type:e.struct,length:6,isNull:!1}),()=>({type:e.struct,length:7,isNull:!1}),()=>({type:e.struct,length:8,isNull:!1}),()=>({type:e.struct,length:9,isNull:!1}),()=>({type:e.struct,length:10,isNull:!1}),()=>({type:e.struct,length:11,isNull:!1}),()=>({type:e.struct,length:12,isNull:!1}),()=>({type:e.struct,length:13,isNull:!1}),()=>({type:e.struct,length:14,isNull:!1}),()=>({type:e.struct,length:0,isNull:!0}),()=>({type:e.bvm,length:3,isNull:!1}),()=>this.#t("0xe1"),()=>this.#t("0xe2"),()=>({type:e.annotation,length:3,isNull:!1}),()=>({type:e.annotation,length:4,isNull:!1}),()=>({type:e.annotation,length:5,isNull:!1}),()=>({type:e.annotation,length:6,isNull:!1}),()=>({type:e.annotation,length:7,isNull:!1}),()=>({type:e.annotation,length:8,isNull:!1}),()=>({type:e.annotation,length:9,isNull:!1}),()=>({type:e.annotation,length:10,isNull:!1}),()=>({type:e.annotation,length:11,isNull:!1}),()=>({type:e.annotation,length:12,isNull:!1}),()=>({type:e.annotation,length:13,isNull:!1}),()=>({type:e.annotation,length:14,isNull:!1}),()=>this.#t("0xef"),()=>this.#t("0xf0"),()=>this.#t("0xf1"),()=>this.#t("0xf2"),()=>this.#t("0xf3"),()=>this.#t("0xf4"),()=>this.#t("0xf5"),()=>this.#t("0xf6"),()=>this.#t("0xf7"),()=>this.#t("0xf8"),()=>this.#t("0xf9"),()=>this.#t("0xfa"),()=>this.#t("0xfb"),()=>this.#t("0xfc"),()=>this.#t("0xfd"),()=>this.#t("0xfe"),()=>this.#t("0xff")];#e=[()=>({type:e.nop,length:0,isNull:!1}),()=>({type:e.nop,length:1,isNull:!1}),()=>({type:e.nop,length:2,isNull:!1}),()=>({type:e.nop,length:3,isNull:!1}),()=>({type:e.nop,length:4,isNull:!1}),()=>({type:e.nop,length:5,isNull:!1}),()=>({type:e.nop,length:6,isNull:!1}),()=>({type:e.nop,length:7,isNull:!1}),()=>({type:e.nop,length:8,isNull:!1}),()=>({type:e.nop,length:9,isNull:!1}),()=>({type:e.nop,length:10,isNull:!1}),()=>({type:e.nop,length:11,isNull:!1}),()=>({type:e.nop,length:12,isNull:!1}),()=>({type:e.nop,length:13,isNull:!1}),()=>({type:e.nop,length:14,isNull:!1}),()=>({type:e.null,length:0,isNull:!0}),()=>({type:e.bool,length:0,isNull:!1,bool:!1}),()=>({type:e.bool,length:0,isNull:!1,bool:!0}),()=>this.#t("0x12"),()=>this.#t("0x13"),()=>this.#t("0x14"),()=>this.#t("0x15"),()=>this.#t("0x16"),()=>this.#t("0x17"),()=>this.#t("0x18"),()=>this.#t("0x19"),()=>this.#t("0x1a"),()=>this.#t("0x1b"),()=>this.#t("0x1c"),()=>this.#t("0x1d"),()=>this.#t("0x1e"),()=>({type:e.bool,length:0,isNull:!0}),()=>({type:e["int+"],length:0,isNull:!1}),()=>({type:e["int+"],length:1,isNull:!1}),()=>({type:e["int+"],length:2,isNull:!1}),()=>({type:e["int+"],length:3,isNull:!1}),()=>({type:e["int+"],length:4,isNull:!1}),()=>({type:e["int+"],length:5,isNull:!1}),()=>({type:e["int+"],length:6,isNull:!1}),()=>({type:e["int+"],length:7,isNull:!1}),()=>({type:e["int+"],length:8,isNull:!1}),()=>({type:e["int+"],length:9,isNull:!1}),()=>({type:e["int+"],length:10,isNull:!1}),()=>({type:e["int+"],length:11,isNull:!1}),()=>({type:e["int+"],length:12,isNull:!1}),()=>({type:e["int+"],length:13,isNull:!1}),()=>({type:e["int+"],length:14,isNull:!1}),()=>({type:e["int+"],length:0,isNull:!0}),()=>this.#t("0x30"),()=>({type:e["int-"],length:1,isNull:!1}),()=>({type:e["int-"],length:2,isNull:!1}),()=>({type:e["int-"],length:3,isNull:!1}),()=>({type:e["int-"],length:4,isNull:!1}),()=>({type:e["int-"],length:5,isNull:!1}),()=>({type:e["int-"],length:6,isNull:!1}),()=>({type:e["int-"],length:7,isNull:!1}),()=>({type:e["int-"],length:8,isNull:!1}),()=>({type:e["int-"],length:9,isNull:!1}),()=>({type:e["int-"],length:10,isNull:!1}),()=>({type:e["int-"],length:11,isNull:!1}),()=>({type:e["int-"],length:12,isNull:!1}),()=>({type:e["int-"],length:13,isNull:!1}),()=>({type:e["int-"],length:14,isNull:!1}),()=>({type:e["int-"],length:0,isNull:!0}),()=>({type:e.float,length:0,isNull:!1}),()=>this.#t("0x41"),()=>this.#t("0x42"),()=>this.#t("0x43"),()=>({type:e.float,length:4,isNull:!1}),()=>this.#t("0x45"),()=>this.#t("0x46"),()=>this.#t("0x47"),()=>({type:e.float,length:8,isNull:!1}),()=>this.#t("0x49"),()=>this.#t("0x4a"),()=>this.#t("0x4b"),()=>this.#t("0x4c"),()=>this.#t("0x4d"),()=>this.#t("0x4e"),()=>({type:e.float,length:0,isNull:!0}),()=>({type:e.decimal,length:0,isNull:!1}),()=>({type:e.decimal,length:1,isNull:!1}),()=>({type:e.decimal,length:2,isNull:!1}),()=>({type:e.decimal,length:3,isNull:!1}),()=>({type:e.decimal,length:4,isNull:!1}),()=>({type:e.decimal,length:5,isNull:!1}),()=>({type:e.decimal,length:6,isNull:!1}),()=>({type:e.decimal,length:7,isNull:!1}),()=>({type:e.decimal,length:8,isNull:!1}),()=>({type:e.decimal,length:9,isNull:!1}),()=>({type:e.decimal,length:10,isNull:!1}),()=>({type:e.decimal,length:11,isNull:!1}),()=>({type:e.decimal,length:12,isNull:!1}),()=>({type:e.decimal,length:13,isNull:!1}),()=>({type:e.decimal,length:14,isNull:!1}),()=>({type:e.decimal,length:0,isNull:!0}),()=>this.#t("0x60"),()=>this.#t("0x61"),()=>({type:e.timestamp,length:2,isNull:!1}),()=>({type:e.timestamp,length:3,isNull:!1}),()=>({type:e.timestamp,length:4,isNull:!1}),()=>({type:e.timestamp,length:5,isNull:!1}),()=>({type:e.timestamp,length:6,isNull:!1}),()=>({type:e.timestamp,length:7,isNull:!1}),()=>({type:e.timestamp,length:8,isNull:!1}),()=>({type:e.timestamp,length:9,isNull:!1}),()=>({type:e.timestamp,length:10,isNull:!1}),()=>({type:e.timestamp,length:11,isNull:!1}),()=>({type:e.timestamp,length:12,isNull:!1}),()=>({type:e.timestamp,length:13,isNull:!1}),()=>({type:e.timestamp,length:14,isNull:!1}),()=>({type:e.timestamp,length:0,isNull:!0}),()=>({type:e.symbol,length:0,isNull:!1}),()=>({type:e.symbol,length:1,isNull:!1}),()=>({type:e.symbol,length:2,isNull:!1}),()=>({type:e.symbol,length:3,isNull:!1}),()=>({type:e.symbol,length:4,isNull:!1}),()=>({type:e.symbol,length:5,isNull:!1}),()=>({type:e.symbol,length:6,isNull:!1}),()=>({type:e.symbol,length:7,isNull:!1}),()=>({type:e.symbol,length:8,isNull:!1}),()=>({type:e.symbol,length:9,isNull:!1}),()=>({type:e.symbol,length:10,isNull:!1}),()=>({type:e.symbol,length:11,isNull:!1}),()=>({type:e.symbol,length:12,isNull:!1}),()=>({type:e.symbol,length:13,isNull:!1}),()=>({type:e.symbol,length:14,isNull:!1}),()=>({type:e.symbol,length:0,isNull:!0}),()=>({type:e.string,length:0,isNull:!1}),()=>({type:e.string,length:1,isNull:!1}),()=>({type:e.string,length:2,isNull:!1}),()=>({type:e.string,length:3,isNull:!1}),()=>({type:e.string,length:4,isNull:!1}),()=>({type:e.string,length:5,isNull:!1}),()=>({type:e.string,length:6,isNull:!1}),()=>({type:e.string,length:7,isNull:!1}),()=>({type:e.string,length:8,isNull:!1}),()=>({type:e.string,length:9,isNull:!1}),()=>({type:e.string,length:10,isNull:!1}),()=>({type:e.string,length:11,isNull:!1}),()=>({type:e.string,length:12,isNull:!1}),()=>({type:e.string,length:13,isNull:!1}),()=>({type:e.string,length:14,isNull:!1}),()=>({type:e.string,length:0,isNull:!0}),()=>({type:e.clob,length:0,isNull:!1}),()=>({type:e.clob,length:1,isNull:!1}),()=>({type:e.clob,length:2,isNull:!1}),()=>({type:e.clob,length:3,isNull:!1}),()=>({type:e.clob,length:4,isNull:!1}),()=>({type:e.clob,length:5,isNull:!1}),()=>({type:e.clob,length:6,isNull:!1}),()=>({type:e.clob,length:7,isNull:!1}),()=>({type:e.clob,length:8,isNull:!1}),()=>({type:e.clob,length:9,isNull:!1}),()=>({type:e.clob,length:10,isNull:!1}),()=>({type:e.clob,length:11,isNull:!1}),()=>({type:e.clob,length:12,isNull:!1}),()=>({type:e.clob,length:13,isNull:!1}),()=>({type:e.clob,length:14,isNull:!1}),()=>({type:e.clob,length:0,isNull:!0}),()=>({type:e.blob,length:0,isNull:!1}),()=>({type:e.blob,length:1,isNull:!1}),()=>({type:e.blob,length:2,isNull:!1}),()=>({type:e.blob,length:3,isNull:!1}),()=>({type:e.blob,length:4,isNull:!1}),()=>({type:e.blob,length:5,isNull:!1}),()=>({type:e.blob,length:6,isNull:!1}),()=>({type:e.blob,length:7,isNull:!1}),()=>({type:e.blob,length:8,isNull:!1}),()=>({type:e.blob,length:9,isNull:!1}),()=>({type:e.blob,length:10,isNull:!1}),()=>({type:e.blob,length:11,isNull:!1}),()=>({type:e.blob,length:12,isNull:!1}),()=>({type:e.blob,length:13,isNull:!1}),()=>({type:e.blob,length:14,isNull:!1}),()=>({type:e.blob,length:0,isNull:!0}),()=>({type:e.list,length:0,isNull:!1}),()=>({type:e.list,length:1,isNull:!1}),()=>({type:e.list,length:2,isNull:!1}),()=>({type:e.list,length:3,isNull:!1}),()=>({type:e.list,length:4,isNull:!1}),()=>({type:e.list,length:5,isNull:!1}),()=>({type:e.list,length:6,isNull:!1}),()=>({type:e.list,length:7,isNull:!1}),()=>({type:e.list,length:8,isNull:!1}),()=>({type:e.list,length:9,isNull:!1}),()=>({type:e.list,length:10,isNull:!1}),()=>({type:e.list,length:11,isNull:!1}),()=>({type:e.list,length:12,isNull:!1}),()=>({type:e.list,length:13,isNull:!1}),()=>({type:e.list,length:14,isNull:!1}),()=>({type:e.list,length:0,isNull:!0}),()=>({type:e.sexp,length:0,isNull:!1}),()=>({type:e.sexp,length:1,isNull:!1}),()=>({type:e.sexp,length:2,isNull:!1}),()=>({type:e.sexp,length:3,isNull:!1}),()=>({type:e.sexp,length:4,isNull:!1}),()=>({type:e.sexp,length:5,isNull:!1}),()=>({type:e.sexp,length:6,isNull:!1}),()=>({type:e.sexp,length:7,isNull:!1}),()=>({type:e.sexp,length:8,isNull:!1}),()=>({type:e.sexp,length:9,isNull:!1}),()=>({type:e.sexp,length:10,isNull:!1}),()=>({type:e.sexp,length:11,isNull:!1}),()=>({type:e.sexp,length:12,isNull:!1}),()=>({type:e.sexp,length:13,isNull:!1}),()=>({type:e.sexp,length:14,isNull:!1}),()=>({type:e.sexp,length:0,isNull:!0}),()=>({type:e.struct,length:0,isNull:!1}),()=>({type:e.struct,length:14,isNull:!1}),()=>({type:e.struct,length:2,isNull:!1}),()=>({type:e.struct,length:3,isNull:!1}),()=>({type:e.struct,length:4,isNull:!1}),()=>({type:e.struct,length:5,isNull:!1}),()=>({type:e.struct,length:6,isNull:!1}),()=>({type:e.struct,length:7,isNull:!1}),()=>({type:e.struct,length:8,isNull:!1}),()=>({type:e.struct,length:9,isNull:!1}),()=>({type:e.struct,length:10,isNull:!1}),()=>({type:e.struct,length:11,isNull:!1}),()=>({type:e.struct,length:12,isNull:!1}),()=>({type:e.struct,length:13,isNull:!1}),()=>({type:e.struct,length:14,isNull:!1}),()=>({type:e.struct,length:0,isNull:!0}),()=>({type:e.bvm,length:3,isNull:!1}),()=>({type:e.inline_annotation,length:14,isNull:!1}),()=>({type:e.inline_annotation,length:14,isNull:!1}),()=>({type:e.annotation,length:3,isNull:!1}),()=>({type:e.annotation,length:4,isNull:!1}),()=>({type:e.annotation,length:5,isNull:!1}),()=>({type:e.annotation,length:6,isNull:!1}),()=>({type:e.annotation,length:7,isNull:!1}),()=>({type:e.annotation,length:8,isNull:!1}),()=>({type:e.annotation,length:9,isNull:!1}),()=>({type:e.annotation,length:10,isNull:!1}),()=>({type:e.annotation,length:11,isNull:!1}),()=>({type:e.annotation,length:12,isNull:!1}),()=>({type:e.annotation,length:13,isNull:!1}),()=>({type:e.annotation,length:14,isNull:!1}),()=>this.#t("0xef"),()=>({type:e.template,length:14,isNull:!1}),()=>({type:e.template,length:14,isNull:!1}),()=>({type:e.template,length:14,isNull:!1}),()=>({type:e.inline_symbol,length:14,isNull:!1}),()=>({type:e.inline_fieldname,length:14,isNull:!1}),()=>this.#t("0xf5"),()=>this.#t("0xf6"),()=>this.#t("0xf7"),()=>this.#t("0xf8"),()=>this.#t("0xf9"),()=>this.#t("0xfa"),()=>this.#t("0xfb"),()=>this.#t("0xfc"),()=>this.#t("0xfd"),()=>this.#t("0xfe"),()=>this.#t("0xff")];#s;#r;#a=t=>{throw new Error(t)};#n=this.#a;#t=t=>{this.#n(`Invalid Ion T/L pair ${t}.`)};constructor(t){t instanceof Ut.ByteReader||this.#n("TypeDescriptorReader expected byteReader to be a ByteReader."),this.#s=t}readTypeAndLength(t,s){this.#s.setPosition(t);let l=this.#s.nextByte();if(l===null)return null;l===void 0&&this.notifier.error("typeAndLengthyByte is undefined");let n;switch(s){case"1_0":n=this.#l;break;case"1_1":case"unknown":n=this.#e;break;default:this.notifier.error("unknown context");break}let i=n[l]();if(i.type===e.bvm&&(i.majorVersion=this.#s.nextByte(),i.minorVersion=this.#s.nextByte(),this.#s.skipBytes(-2)),i.length===14){let a=this.#s.readVarUInt(this.#n);if(a===null)return this.#s.skipBytes(-1),null;typeof a.magnitude=="bigint"?i.length=BigInt(a.numBytesRead)+a.magnitude:i.length=a.numBytesRead+a.magnitude,i.varUIntLength=a.numBytesRead,i.isVarUInt=!0,l===209&&(i.isSortedStruct=!0)}if(i.type===e.annotation){let a=this.#s.readVarUInt(this.#n);if(a===null)return i.varUIntLength!==void 0?this.#s.skipBytes(-1*(1+i.varUIntLength)):this.#s.skipBytes(-1),null;i.annotationsLength=a.magnitude,i.annotationsVarUIntLength=a.numBytesRead}return i}readFieldName(t){return this.#s.setPosition(t),this.#s.readVarUInt(this.#n)}setPosition(t){this.#s.setPosition(t)}setErrorHandler(t){typeof errorHandler!="function"&&this.#n(`TypeDescriptorReader setErrorHandler passed a ${typeof t} instead of function.`),this.#n=t}};Q.TypeDescriptorReader=Y});var _=m(tt=>{"use strict";var Dt=w(),B=E().IonTypes,ge=v(),et=class{#l;#e;#s=function(t,s,l,n){l.setPosition(t);let i=l.readUInt(s,n).magnitude;return(s>3&&i===0n||i===0)&&console.log(`||NOTICE|| Int stored with extra padding at position ${t}.`),i};#r=function(t,s,l,n){l.setPosition(t);let i=l.readUInt(s,n).magnitude;return(s>3&&i===0n||i===0)&&n("readNegativeInt() zero not a valid negative int value."),-i};#a=function(t,s,l,n){s!==0&&s!==4&&s!==8&&s!==15&&n(`ScalarValueReader illegal float length ${s}.`);let i=new Uint8Array(s);l.setPosition(t);for(let h=0;h<s;++h)if(i[h]=l.nextByte(),i[h]===null)return l.skipBytes(-1*h),null;let a;switch(s){case 0:return 0;case 4:return a=new DataView(i.buffer),a.getFloat32(0,!1);case 8:return a=new DataView(i.buffer),a.getFloat64(0,!1);case 15:return null;default:}};#n=function(t,s,l,n){l.setPosition(t);let i=l.readVarInt(n);if(i===null)return null;let a=s-i.numBytesRead,h;if(a<0&&n("ScalarValueReader illegal coefficient length."),a===0)h={magnitude:0,numBytesRead:0,isNegative:!1};else{if(h=l.readInt(a,n),h===null)return l.skipBytes(-1*i.numBytesRead),null;h.isNegative===!1&&(h.magnitude===0||h.magnitude===0n)}return{exponent:i,coefficient:h}};#t=function(t,s,l,n){l.setPosition(t);let i=s,a,h,p,y,d,o,u,g,N;if(a=l.readVarInt(n),a===null)return null;if(i-=a.numBytesRead,h=l.readVarUInt(n),h===null)return l.skipBytes(-1*(s-i)),null;if(i-=h.numBytesRead,i>0){if(p=l.readVarUInt(n),p===null)return l.skipBytes(-1*(s-i)),null;i-=p.numBytesRead}if(i>0){if(y=l.readVarUInt(n),y===null)return l.skipBytes(-1*(s-i)),null;i-=y.numBytesRead}if(i>0){if(d=l.readVarUInt(n),d===null)return l.skipBytes(-1*(s-i)),null;if(i-=d.numBytesRead,i>0){if(o=l.readVarUInt(n),o===null)return l.skipBytes(-1*(s-i)),null;i-=o.numBytesRead}else n("ScalarValueReader hours present without minutes.")}if(i>0){if(u=l.readVarUInt(n),u===null)return l.skipBytes(-1*(s-i)),null;i-=u.numBytesRead}if(i>0){if(g=l.readVarInt(n),g===null)return l.skipBytes(-1*(s-i)),null;i-=g.numBytesRead}if(i>0){if(N=l.readInt(i,n),N===null)return l.skipBytes(-1*(s-i)),null}else g!==void 0&&(N={numBytesRead:0,magnitude:0,isNegative:!1});return{offset:a,year:h,month:p,day:y,hour:d,minute:o,second:u,fractionExponent:g,fractionCoefficient:N}};#h=function(t,s,l,n){if(s<1)return 0;l.setPosition(t);let i=l.readUInt(s,n);return i===null?null:i.magnitude};#i=function(t,s,l,n){let i=new Uint8Array(s);l.setPosition(t);for(let a=0;a<s;++a)if(i[a]=l.nextByte(),i[a]===null)return l.skipBytes(-1*a),null;return this.#l.decode(i)};#o=function(t,s,l){let n=new Uint8Array(s);l.setPosition(t);for(let i=0;i<s;++i)if(n[i]=l.nextByte(),n[i]===null)return l.skipBytes(-1*i),null;return n};#p=function(t,s,l){let n=new Uint8Array(s);l.setPosition(t);for(let i=0;i<s;++i)if(n[i]=l.nextByte(),n[i]===null)return l.skipBytes(-1*i),null;return n};#y=t=>{throw new Error(t)};#u;#f=this.#y;constructor(t){t instanceof Dt.ByteReader||this.#f("ScalarValueReader expected byteReader to be a ByteReader."),this.#e=t,this.#l=new TextDecoder("utf-8");let s=this;this.#u=new Array(B.numTypes);for(let l=0;l<B.numTypes;++l)this.#u[l]=function(n,i){s.#f(`ScalarValueReader called on ${B.nameFromType(l)}, a non-scalar.`)};this.#u[B["int+"]]=this.#s,this.#u[B["int-"]]=this.#r,this.#u[B.float]=this.#a,this.#u[B.decimal]=this.#n,this.#u[B.timestamp]=this.#t,this.#u[B.symbol]=this.#h,this.#u[B.string]=this.#i,this.#u[B.clob]=this.#o,this.#u[B.blob]=this.#p}read(t,s,l){return this.#u[t]===void 0&&this.#f(`ScalarValueReader read() called with non-existant type ${t}.`),(!Number.isInteger(s)||s<0)&&this.#f(`ScalarValueReader read() called with invalid position ${s}.`),(!Number.isInteger(l)||l<=0)&&this.#f(`ScalarValueReader read() called with invalid length ${l}.`),this.#u[t].apply(this,[s,l,this.#e,this.#f])}setErrorHandler(t){typeof errorHandler!="function"&&this.#f(`ScalarValueReader setErrorHandler passed a ${typeof t} instead of function.`),this.#f=t}};tt.ScalarValueReader=et});var W=m(F=>{"use strict";function _t(r){return!!(Array.isArray(r)&&r.length===7)}function Ft(r){return r[6]===void 0||r[6]===null?r[6]:[r[0],r[6]-r[0],r[2],r[3]-(r[6]-r[1]-r[0]),r[4],r[5],void 0]}function kt(r){return r[0]+r[1]}F.isElementReference=_t;F.nextElementReference=Ft;F.absoluteOffset=kt});var R=m(lt=>{"use strict";var b=E().IonTypes,k=W(),st=class{#l;#e;#s;#r;#a=!1;#n=!1;#t;#h;#i;#o=0;#p=0;#y=0;#u=0;#f=0;#d=0;#g=0;#N=null;#m=null;#b=null;#c=!1;#x=!1;#I=null;#B=()=>{this.#l=void 0,this.#e=void 0,this.#s=void 0,this.#r=void 0,this.#a=!1,this.#n=!1,this.#t=void 0,this.#h=void 0,this.#i=void 0,this.#o=0,this.#p=0,this.#y=0,this.#u=0,this.#f=0,this.#d=0,this.#g=0,this.#N=null,this.#m=null,this.#b=null,this.#c=!1,this.#x=!1};#E=t=>{this.#i=t,this.#s=[]};constructor(t){if(!k.isElementReference(t))throw new Error(`IonElement constructor passed ${t} instead of ElementReference.`);this.#E(t)}toString(){return`{ #reference: ${this.#i},
              #type: ${this.#l}, 
              #isSystemElement: ${this.#c},
              #isNull: ${this.#e},
              #isLocalSymbolTable: ${this.#a},
              #isSharedSymbolTable: ${this.#n},
              #annotations: ${this.#s},
              #length: ${this.#o},
              #varUIntLength: ${this.#p},
              #fieldNameVarUIntLength: ${this.#g},
              #fieldNameSymbolID: ${this.#r},
              #annotationsLength: ${this.#f},
              #annotationsVarUIntLength: ${this.#d},
              #lengthWithoutAnnotations: ${this.#y},
              #contains: ${this.#m},
              #previous: ${this.#N},
              bytePositionOfRepresentation: ${this.bytePositionOfRepresentation},
              isContainer: ${this.isContainer} }`}repurpose(t){if(!k.isElementReference(t))throw new Error(`IonElement repurpose passed ${t} instead of ElementReference.`);this.#B(),this.#E(t)}reference(){return this.#i}readTypeDescriptor(t,s){let l=this.#i[1],n;if(this.#i[4]!==null&&this.#i[5]===b.struct){if(n=t.readFieldName(l),n===null)return null;l+=n.numBytesRead}let i=t.readTypeAndLength(l,s);if(i===null)return t.setPosition(this.#i[1]),null;this.#o=i.length||0;let a;if(i.type===b.annotation){if(a=i,!Number.isInteger(a.annotationsVarUIntLength)||!Number.isInteger(a.annotationsLength))throw new Error("Annotation missing 'annot_length' field data.");if(a.annotationsLength===0)throw new Error("'annot_length' field must be greater than zero.");let d=a.annotationsLength,o=l+1+(a.varUIntLength||0)+a.annotationsVarUIntLength,u;do{if(u=t.readFieldName(o),u===null)return t.setPosition(this.#i[1]),null;this.#s.push(u),o+=u.numBytesRead,d-=u.numBytesRead}while(d>0);let g=this.#s[0],N=l+1+(a.varUIntLength||0)+a.annotationsVarUIntLength+a.annotationsLength;if(i=t.readTypeAndLength(N,s),i===null)return t.setPosition(this.#i[1]),null;if(i.type===b.annotation)throw new Error("Annotations cannot wrap annotations.");if(i.type===b.nop)throw new Error("Annotations cannot wrap nop.");if(g.magnitude===3||g.magnitude===9){if(this.#i[2]>0)throw new Error("Symbol table annotation is not at depth 0.");if(i.type!==b.struct)throw new Error("Symbol table annotation is not wrapping struct.");g.magnitude===3?this.#a=!0:this.#n=!0,this.#I=g,this.#c=!0}i.annotationsVarUIntLength=a.annotationsVarUIntLength,i.annotationsLength=a.annotationsLength,i.varUIntLengthWithAnnotations=a.varUIntLength}if(i.type===b.bvm){if(this.#i[2]!==0)throw new Error(`BVM encountered at depth ${this.#i[2]}`);this.#c=!0,this.#t=i.majorVersion,this.#h=i.minorVersion}if(i.type===b.nop&&(this.#c=!0),i.type===b.struct&&i.isSortedStruct&&(this.#x=!0,i.length-i.varUIntLength==0))throw new Error("Sorted struct with no length.");i.lengthWithoutAnnotations=i.length,this.#l=i.type,this.#e=i.isNull,this.#p=i.varUIntLength||0,this.#f=i.annotationsLength||0,this.#d=i.annotationsVarUIntLength||0,this.#y=i.lengthWithoutAnnotations||0,this.#u=i.varUIntLengthWithAnnotations||0,n&&(this.#r=n.magnitude,this.#g=n.numBytesRead),this.#l===b.bool&&(this.#b=i.bool);let h;typeof this.#o=="bigint"||typeof this.#g=="bigint"?h=1n+BigInt(this.#o)+BigInt(this.#g):h=1+this.#o+this.#g,b.isContainer(this.#l)&&this.#y!==0&&this.#e===!1&&(typeof h=="bigint"?this.#m=[this.#i[0],this.bytePositionOfRepresentation,this.#i[2]+1,h-BigInt(this.bytePositionOfRepresentation-this.#i[1]),this.#i[1]+this.#i[0],this.#l,void 0]:this.#m=[this.#i[0],this.bytePositionOfRepresentation,this.#i[2]+1,h-(this.bytePositionOfRepresentation-this.#i[1]),this.#i[1]+this.#i[0],this.#l,void 0]);let p;if(typeof h=="bigint"||typeof this.#i[3]=="bigint"){if(p=BigInt(this.#i[3])-BigInt(h),p>0n)this.#i[6]=BigInt(this.#i[1])+BigInt(h)+BigInt(this.#i[0]);else if(p<0n)return t.setPosition(this.#i[1]),null}else if(p=this.#i[3]-h,p>0)this.#i[6]=this.#i[1]+h+this.#i[0];else if(p<0)return t.setPosition(this.#i[1]),null;let y="";for(let d=0;d<this.#i[2];++d)y+="  "}get bytePositionOfRepresentation(){return this.#l===b.bvm||this.#l===b.nop||this.#y===0||this.#e?null:this.#i[1]+this.#g+(this.#f>0?1+this.#u+this.#d+this.#f:0)+1+this.#p}get bytePositionOfAnnotations(){return this.#f>0?this.#i[1]+(this.#g+1+this.#u+this.#d):null}get isContainer(){return b.isContainer(this.#l)}get isScalar(){return b.isScalar(this.#l)}get isNull(){return this.#e}get containsElement(){return this.#m}get nextElementReference(){return k.nextElementReference(this.#i)}get previousElement(){return this.#N}get absoluteOffset(){return k.absoluteOffset(this.#i)}get relativeOffset(){return this.#i[1]}get depth(){return this.#i[2]}get container(){return this.#i[4]}get containerType(){return this.#i[5]}get totalLength(){let t;return typeof this.#o=="bigint"?t=BigInt(this.#g)+1n+this.#o:t=this.#g+1+this.#o,t}get length(){return this.#o}get lengthWithoutAnnotations(){return this.#y}get type(){return this.#l}get majorVersion(){return this.#t}get minorVersion(){return this.#h}get fieldNameSymbolID(){return this.#r}get annotations(){return this.#s}get annotationsLength(){return this.#f}get annotationsVarUIntLength(){return this.#d}get varUIntLengthWithAnnotations(){return this.#u}get varUIntLength(){return this.#p}get boolRepresentation(){return this.#b}get isSystemElement(){return this.#c}get isSorted(){return this.#x}get isLocalSymbolTable(){return this.#a}get isSharedSymbolTable(){return this.#n}get firstAnnotation(){return this.#I}get bytesRemainingAtDepth(){return this.#i[3]}get fieldNameVarUIntLength(){return this.#g}get nibblePositionStruct(){let t={},s=0;if(t.offset=this.#i[1],t.depth=this.#i[2],typeof this.totalLength=="bigint"?t.totalNibbles=this.totalLength*2n:t.totalNibbles=this.totalLength*2,this.#r===void 0)t.fieldName=null;else{let i={};i.symbolMagnitude=this.fieldNameSymbolID,i.nibbles={},i.nibbles.symbolStart=s,i.nibbles.symbolEnd=s+this.fieldNameVarUIntLength*2-1,t.fieldName=i,s=i.nibbles.symbolEnd+1}if(this.annotationsLength===0)t.annotation={};else{let i={},a={};a.type=s,s+=1,a.wrapperLengthStart=s,a.wrapperLengthEnd=s+this.#u*2,s=a.wrapperLengthEnd+1,a.annotationsLengthStart=s,a.annotationsLengthEnd=s+this.#d*2-1,s=a.annotationsLengthEnd+1,i.wrapperLengthValue=this.#o,i.lengthValue=this.annotationsLength;let h=[];for(let p=0;p<this.annotations.length;++p){let y={};y.nibbles={},y.nibbles.symbolStart=s,y.nibbles.symbolEnd=s+this.annotations[p].numBytesRead*2-1,s=y.nibbles.symbolEnd+1,y.symbolMagnitude=this.annotations[p].magnitude,h.push(y)}i.nibbles=a,i.annotations=h,t.annotation=i}let l={},n={};if(n.type=s,s+=1,n.lengthStart=s,n.lengthEnd=s+this.varUIntLength*2,s=n.lengthEnd+1,s!==t.totalNibbles)if(s<t.totalNibbles)n.representationStart=s,n.representationEnd=t.totalNibbles-1;else throw new Error(`nibblePositionStruct has invalid position ${postion} out of ${t.totalNibbles} for representationLength`);return l.typeValue=this.type,l.typeName=b.nameFromType(this.type),l.lengthValue=this.lengthWithoutAnnotations-this.varUIntLength,l.totalLength=this.totalLength,l.nibbles=n,t.element=l,t}};lt.IonElement=st});var P=m(it=>{"use strict";var Ne=E().IonTypes,nt=class{#l=1e4;#e=this.#l;#s=1;#r=null;#a;#n;#t;#h;#i=t=>{this.#s+t>this.#e&&(this.#e+=this.#l,this.#a.push(new Array(this.#l)),this.#n!==void 0&&this.#n.push(new Array(this.#l)),this.#t!==void 0&&(this.#t.push(new Array(this.#l)),this.#h.push(new Array(this.#l))))};#o=t=>{let s=t-this.#l,l=1;for(;s>=this.#l;)s-=this.#l,l++;return{array:l,symbol:s}};constructor(t,s,l,n,i){if(this.#a=[new Array(this.#l)],s===!0&&(this.#n=[new Array(this.#l)]),l===!0&&(this.#t=[new Array(this.#l)],this.#h=[new Array(this.#l)]),t===!0)switch(i===void 0&&(i=0),n){case"1_0":this.addSymbol("$ion",i),this.addSymbol("$ion_1_0",i),this.addSymbol("$ion_symbol_table",i),this.addSymbol("name",i),this.addSymbol("version",i),this.addSymbol("imports",i),this.addSymbol("symbols",i),this.addSymbol("max_id",i),this.addSymbol("$ion_shared_symbol_table",i);break;case"1_1":this.addSymbol("$ion",i),this.addSymbol("$ion_1_0",i),this.addSymbol("$ion_symbol_table",i),this.addSymbol("name",i),this.addSymbol("version",i),this.addSymbol("imports",i),this.addSymbol("symbols",i),this.addSymbol("max_id",i),this.addSymbol("$ion_shared_symbol_table",i),this.addSymbol("templates",i),this.addSymbol("max_template_id",i);break;default:throw new Error(`SymbolTable passed invalid context ${n}`)}}addSymbol(t,s){if(this.#i(1),this.#s<this.#l)this.#a[0][this.#s]=t,s!==void 0&&this.#n!==void 0&&(this.#n[0][this.#s]=s);else{let n=this.#o(this.#s);this.#a[n.array][n.symbol]=t,s!==void 0&&this.#n!==void 0&&(this.#n[n.array][n.symbol]=s)}let l=this.#s;return this.#s++,l}addUsage(t,s){if(!this.#t)throw new Error(`SymbolTable addUsage(${t}, ${s}) called with no usage enabled.`);if(t<this.#l)this.#t[0][t]===void 0?(this.#t[0][t]=[s],this.#h[0][t]=1):(this.#t[0][t].push(s),this.#h[0][t]++);else{let l=this.#o(this.#s);this.#t[l.array][l.symbol]===void 0?(this.#t[l.array][l.symbol]=[s],this.#h[l.array][l.symbol]=1):(this.#t[l.array][l.symbol].push(s),this.#h[l.array][l.symbol]++)}}getSymbolValue(t,s){if(t<this.#l){if(s!==void 0&&this.#n[0][t]>s)throw new Error(`${this.#n[0][t]} > ${s}`);return this.#a[0][t]}let l=this.#o(this.#s);if(s!==void 0&&this.#n[l.array][l.symbol]>s)throw new Error(`${this.#n[l.array][l.symbol]} > ${s}`);return this.#a[l.array][l.symbol]}getSymbolUsage(t){if(t<this.#l)return this.#t[0][t];let s=this.#o(this.#s);return this.#t[s.array][s.symbol]}getSymbolUsageCount(t){if(t<this.#l)return this.#h[0][t];let s=this.#o(this.#s);return this.#h[s.array][s.symbol]}getSymbolID(t){for(let s=0;s<this.#a.length;++s)for(let l=0;l<this.#a[s].length;++l)if(t===this.#a[s][l])return s*this.#l+l;return null}get symbols(){let t=[];for(let s=0;s<this.#a.length;++s)for(let l=0;l<this.#a[s].length;++l)this.#a[s][l]!==void 0&&t.push(this.#a[s][l]);return t}get meta(){let t=[];for(let s=0;s<this.#a.length;++s)for(let l=0;l<this.#a[s].length;++l)this.#a[s][l]!==void 0&&t.push(this.#n[s][l]);return t}get usage(){let t=[];for(let s=0;s<this.#a.length;++s)for(let l=0;l<this.#a[s].length;++l)this.#a[s][l]!==void 0&&t.push(this.#t[s][l]);return t}get usageCounts(){let t=[];for(let s=0;s<this.#a.length;++s)for(let l=0;l<this.#a[s].length;++l)this.#a[s][l]!==void 0&&t.push(this.#h[s][l]);return t}};it.SymbolTable=nt});var G=m(at=>{"use strict";var xe=R().IonElement,$=E().IonTypes,rt=class{#l=10;#e={topLevelCount:0,nulls:{count:0},maxDepth:{value:null,offset:[],count:0},maxAnnotations:{value:null,offset:[],count:0},symbolTable:{local:{count:0},shared:{count:0},append:{count:0},inline:{}},templates:{}};constructor(){for(let t=0;t<$.numTypes;++t)this.#e.nulls[$.nameFromType(t)]={count:0},this.#e[$.nameFromType(t)]={byteCount:0,maxBytes:{value:null,offset:[],count:0},minBytes:{value:null,offset:[],count:0},maxDepth:{value:null,offset:[],count:0},depthCount:[],count:0}}trackElement(t,s){let l=this.#e[$.nameFromType(t.type)],n=t.lengthWithoutAnnotations,i=t.relativeOffset+(s===void 0?0:s);for(l===void 0&&console.log(t.toString()),t.depth===0&&this.#e.topLevelCount++,l.count++,l.byteCount+=n,n>l.maxBytes.value||l.maxBytes.value===null?(l.maxBytes.value=n,l.maxBytes.offset=[i],l.maxBytes.count=1):n===l.maxBytes.value&&(l.count<this.#l&&l.maxBytes.offset.push(i),l.maxBytes.count++),n<l.minBytes.value||l.minBytes.value===null?(l.minBytes.value=n,l.minBytes.offset=[i],l.minBytes.count=1):n===l.minBytes.value&&(l.count<this.#l&&l.minBytes.offset.push(i),l.minBytes.count++),t.depth>l.maxDepth.value||l.maxDepth.value===null?(l.maxDepth.value=t.depth,l.maxDepth.offset=[i],l.maxDepth.count=1):t.depth===l.maxDepth.value&&(l.count<this.#l&&l.maxDepth.offset.push(i),l.maxDepth.count++),t.depth>this.#e.maxDepth.value||this.#e.maxDepth.value===null?(this.#e.maxDepth.value=t.depth,this.#e.maxDepth.offset=[i],this.#e.maxDepth.count=1):t.depth===this.#e.maxDepth.value&&(this.#e.maxDepth.offset.length<this.#l&&this.#e.maxDepth.offset.push(i),this.#e.maxDepth.count++);l.depthCount.length<t.depth+1;)l.depthCount.push(0);l.depthCount[t.depth]++,t.annotationsLength>0&&(t.annotations.length>this.#e.maxAnnotations.value||this.#e.maxAnnotations.value===null?(this.#e.maxAnnotations.value=t.annotations.length,this.#e.maxAnnotations.offset=[i],this.#e.maxAnnotations.count=1):t.annotations.length===this.#e.maxAnnotations.value&&(this.#e.maxAnnotations.offset.length<this.#l&&this.#e.maxAnnotations.offset.push(i),this.#e.maxAnnotations.count++),this.trackElement({depth:t.depth,positionInStream:i,lengthWithoutAnnotations:t.annotationsLength,type:$.annotation,isNull:!1})),t.isNull===!0&&(this.#e.nulls.count++,this.#e.nulls[$.nameFromType(t.type)].count++)}combineStats(t){this.#e.nulls.count+=t.nulls.count,this.#e.topLevelCount+=t.topLevelCount,this.#e.maxDepth.value===t.maxDepth.value?(this.#e.maxDepth.offset=this.#e.maxDepth.offset.concat(t.maxDepth.offset),this.#e.maxDepth.count+=t.maxDepth.count):this.#e.maxDepth.value>t.maxDepth.value||this.#e.maxDepth.value<t.maxDepth.value&&(this.#e.maxDepth.offset=t.maxDepth.offset,this.#e.maxDepth.count=t.maxDepth.count,this.#e.maxDepth.value=t.maxDepth.value),this.#e.maxAnnotations.value===t.maxAnnotations.value?(this.#e.maxAnnotations.offset=this.#e.maxAnnotations.offset.concat(t.maxAnnotations.offset),this.#e.maxAnnotations.count+=t.maxAnnotations.count):this.#e.maxAnnotations.value>t.maxAnnotations.value||this.#e.maxAnnotations.value<t.maxAnnotations.value&&(this.#e.maxAnnotations.offset=t.maxAnnotations.offset,this.#e.maxAnnotations.count=t.maxAnnotations.count,this.#e.maxAnnotations.value=t.maxAnnotations.value);for(let s=0;s<$.numTypes;++s){let l=$.nameFromType(s);this.#e.nulls[l].count+=t.nulls[l].count,this.#e[l].byteCount+=t[l].byteCount;let n=this.#e[l],i=t[l];n.count+=i.count,n.maxBytes.value===i.maxBytes.value?(n.maxBytes.offset=n.maxBytes.offset.concat(i.maxBytes.offset),n.maxBytes.count+=i.maxBytes.count):n.maxBytes.value>i.maxBytes.value||n.maxBytes.value<i.maxBytes.value&&(n.maxBytes.offset=i.maxBytes.offset,n.maxBytes.count=i.maxBytes.count,n.maxBytes.value=i.maxBytes.value),n.minBytes.value===i.minBytes.value?(n.minBytes.offset=n.minBytes.offset.concat(i.minBytes.offset),n.minBytes.count+=i.minBytes.count):n.minBytes.value<i.minBytes.value||n.minBytes.value>i.minBytes.value&&(n.minBytes.offset=i.minBytes.offset,n.minBytes.count=i.minBytes.count,n.minBytes.value=i.minBytes.value);for(let a=0;a<i.depthCount.length;++a)n.depthCount.length===a&&n.depthCount.push(0),n.depthCount[a]+=i.depthCount[a];n.maxDepth.value===i.maxDepth.value?(n.maxDepth.offset=n.maxDepth.offset.concat(i.maxDepth.offset),n.maxDepth.count+=i.maxDepth.count):n.maxDepth.value>i.maxDepth.value||n.maxDepth.value<i.maxDepth.value&&(n.maxDepth.offset=i.maxDepth.offset,n.maxDepth.count=i.maxDepth.count,n.maxDepth.value=i.maxDepth.value)}}addSymbolTable(t){t.shared===!0?this.#e.symbolTable.shared.count++:t.append===!0?this.#e.symbolTable.append.count++:this.#e.symbolTable.local.count++}get stats(){return this.#e}};at.StructuralAnalyzer=rt});var ft=m(ot=>{"use strict";var f=E().IonTypes,Ee=R().IonElement,Be=P().SymbolTable,Se=_(),ht=v(),ut=class{#l;#e;#s;#r=t=>{let s=null;if(this.#s.length===0)return`$${t}`;if(s=this.#s[0].getSymbolValue(t),s!==void 0)return s;for(let l=1;l<this.#s.length;++l)if(s=this.#s[l].getSymbolValue(t),s!==void 0)return s};#a=t=>{let s=[];if(t.depth>0&&s.push(["Depth",t.depth,t.depth*2]),t.fieldNameVarUIntLength>0&&s.push(["Field name",`$${t.fieldNameSymbolID}`,t.fieldNameVarUIntLength*2]),t.annotationsLength>0){s.push(["Type","Annotation",1]),s.push(["Length",t.length-t.varUIntLengthWithAnnotations,1+t.varUIntLengthWithAnnotations*2]),s.push(["Length of Annotations",t.annotationsVarUIntLength,t.annotationsVarUIntLength*2]);for(let l=0;l<t.annotations.length;++l)s.push(["Annotation",`$${t.annotations[l].magnitude}`,t.annotations[l].numBytesRead*2])}return f.nameFromType(t.type)==="bvm"?(s.push(["Type",f.nameFromType(t.type),2]),s.push(["Major Version",1,2]),s.push(["Minor Version",0,2]),s.push(["BVM","End",2]),s):(s.push(["Type",f.nameFromType(t.type),1]),s.push(["Length",t.lengthWithoutAnnotations-t.varUIntLength,1+t.varUIntLength*2]),s)};#n=t=>{let s;if(t.isNull)return s=`null.${f.nameFromType(t.type)}`,(t.type===f["int+"]||t.type===f["int-"])&&(s="null.int"),s;if(t.isScalar){let l="";switch(t.bytePositionOfRepresentation===null?l=t.varUIntLength:l=ht.readScalarFromElement(t,this.#e),s=l,t.type){case f.bool:s=t.boolRepresentation;break;case f.string:s=`"${l}"`;break;case f.symbol:s=this.#r(l),s===void 0&&(s="$0");break;case f.decimal:l!==0?s=`${l.coefficient.magnitude}d${l.exponent.magnitude}`:s=l;break;case f.timestamp:s=`${l.year.magnitude}`,l.month!==void 0&&(s+=`-${l.month.magnitude}`),l.day!==void 0?(s+=`-${l.day.magnitude}T`,l.hour!==void 0&&(s+=`${l.hour.magnitude}:${l.minute.magnitude}`,l.second!==void 0&&(s+=`:${l.second.magnitude}`,l.fractionCoefficient!==void 0&&(s+=`.${l.fractionCoefficient.magnitude}`)))):s+="T",l.offset.isNegative===!1?s+=`+${l.offset.magnitude}`:s+=`-${l.offset.magnitude}`;break}}else if(t.isContainer)switch(t.type){case f.struct:s="{";break;case f.list:s="[";break;case f.sexp:s="(";break}else s="?";return s};#t=t=>{let s=new Array(4);if(s[0]=[null,"",t.depth*2],t.fieldNameSymbolID){let n=this.#r(t.fieldNameSymbolID);s[1]=[null,n,t.fieldNameVarUIntLength*2]}s[2]=[];for(let n=0;n<t.annotations.length;++n){let i=this.#r(t.annotations[n].magnitude);s[2].push([null,i,t.annotations[n].numBytesRead*2])}let l=t.positionInStream+t.totalLength-t.bytePositionOfRepresentation;return t.isScalar?t.bytePositionOfRepresentation!==null?s[3]=[null,this.#n(t),l*2]:s[3]=[null,this.#n(t),2]:s[3]=[null,this.#n(t),2],s};constructor(t,s,l){this.#l=t,this.#e=s,l!==void 0?this.#s=[...l]:this.#s=[]}printElementToString(t,s){let l="";for(let o=0;o<t.depth;++o)l+="\xB7";let n="";t.fieldNameSymbolID&&(n=this.#r(t.fieldNameSymbolID)+": ");let i="";for(let o=0;o<t.annotations.length;++o)i+=this.#r(t.annotations[o].magnitude)+"::";let a="",h="",p="";if(t.isNull)a=`null.${f.nameFromType(t.type)}`,(t.type===f["int+"]||t.type===f["int-"])&&(a="null.int");else if(t.isScalar){let o="";t.bytePositionOfRepresentation===null?o=t.varUIntLength:o=ht.readScalarFromElement(t,this.#e);let u=o;if(t.type===f.bool)u=`${t.boolRepresentation}`;else if(t.type===f.string)u=`"${o}"`;else if(t.type===f.symbol){let g=this.#r(o);g===void 0&&(g="$0"),u=`${g}`,p=` <${o}>`}else t.type===f.timestamp?(u=`${o.year.magnitude}`,o.month!==void 0&&(u+=`-${o.month.magnitude}`),o.day!==void 0?(u+=`-${o.day.magnitude}`,o.hour!==void 0?(u+=`T${o.hour.magnitude}:${o.minute.magnitude}`,o.second!==void 0&&(u+=`:${o.second.magnitude}`,o.fractionCoefficient!==void 0&&(u+=`.${o.fractionCoefficient.magnitude}`))):u+="T"):u+="T",o.offset.isNegative===!1?u+=`+${o.offset.magnitude}`:u+=`-${o.offset.magnitude}`):t.type===f.decimal&&o!==0&&(u=`${o.coefficient.magnitude}d${o.exponent.magnitude}`);a=`${u}`,h=` // scalar(${f.nameFromType(t.type)})`}else if(t.isContainer){let o="";t.type===f.struct?o="{":t.type===f.list?o="[":t.type===f.sexp&&(o="("),a=`${o}`,h=` // container(${f.nameFromType(t.type)})`}else a="?",h=` // special(${f.nameFromType(t.type)})`;let y="";t.depth!==0&&t.isContainer===!1&&(y=",");let d=`${t.isSystemElement===!0?" [system]":""}`;return`${l}${n}${i}${a}${y}${h}${p}${d}`}printContainerEndToString(t){if(!t.isContainer)throw new Error(`IonElementTextWriter printContainerEndToString(${f.nameFromType(t.type)})`);let s="";for(let i=0;i<t.depth;++i)s+="\xB7";let l="";t.type===f.struct?l="}":t.type===f.list?l="]":t.type===f.sexp&&(l=")");let n="";return t.depth!==0&&(n=","),`${s}${l}${n}`}printElementToAnnotatedString(t,s){let l="",n="",i=t.totalLength,a=`
 ${"".padStart(12," ")}| `,h=`${a}`,p="",y=this.#a(t),d="";for(let c=0;c<y.length;++c)d+=`${a}${p}+-> ${y[c][0]}: ${y[c][1]}`,p+="|".padEnd(y[c][2]," "),h+=`${"|".padEnd(y[c][2]-1,"-")}${y[c][2]>1?"\\":""}`;if(t.isContainer&&t.bytePositionOfRepresentation!==null&&(i=t.bytePositionOfRepresentation-t.positionInStream),i>s.length)throw new Error("IonElementTextWriter has invalid data.");for(let c=0;c<t.depth;++c)l+="\xB7\xB7";for(let c=0;c<i;++c)n+=`${s[c].toString(16).padStart(2,"0")}`;let o=`
 ${(""+t.positionInStream).padStart(12,"0")}| ${l}${n}`,u=this.#t(t),g="",N=`${a}`,I=0,T=null,A=null;if(N+="".padEnd(u[0][2]," "),u[1]!==void 0&&(N+="".padEnd(u[1][2],"!"),T=I,I+=u[1][2]),u[2].length>0){let c=(t.bytePositionOfAnnotations-t.positionInStream)*2-I;N+="".padEnd(c," "),I+=c,A=I;for(let U=0;U<u[2].length;++U)N+="".padEnd(u[2][U][2],"@"),I+=u[2][U][2]}let L=(t.bytePositionOfRepresentation-t.positionInStream)*2-I;t.bytePositionOfRepresentation===null&&(L=0),(t.isContainer||t.isNull)&&(L=(t.bytePositionOfRepresentation-t.positionInStream-1-t.varUIntLength)*2-I),I+=L,N+="".padEnd(L," "),N+="|",N+="".padEnd(u[3][2]-2,"-"),u[3][2]>1&&(N+="/"),g=`${a}${"".padEnd(u[0][2]," ")}`,g+=`${T!==null?"|":""}`,g+=`${A!==null?"".padEnd(A-(T!==null?1:0)," ")+"|"+"".padEnd(I-A-1):"".padEnd(T!==null?I-1:I," ")}`,g+=`+-> ${u[3][1]}`;let V="";A!==null&&(V+=`${a}${"".padEnd(u[0][2]," ")}`,V+=`${T!==null?"|":""}`,V+=`${"".padEnd(A-(T!==null?1:0)," ")+"+- "+u[2][0][1]+"::"}`);let q="";return T!==null&&(q+=`${a}${"".padEnd(u[0][2]," ")}`,q+=`+- ${u[1][1]}:`),`${d}${h}${o}${N}${g}${V}${q}
`}};ot.IonElementTextWriter=ut});var ct=m(pt=>{"use strict";var Pt=D(),Ot=_(),qt=R().IonElement,Ct=P().SymbolTable,yt=v(),Mt=G().StructuralAnalyzer,gt=E().IonTypes,Wt=ft().IonElementTextWriter,dt=class{#l;#e=0;#s;#r;#a;#n;#t;#h;#i;#o;#p=null;#y=function(){this.#h=[],this.#i=!1,this.#o=!1;for(let t=0;t<100;++t)this.#h.push(new qt(0,0,this.#e,null,null,null));this.#p=this.#h[0]};constructor(t){if(t===void 0)throw new Error("ValueStreamReader passed an undefined reader.");if(this.#l=t,this.#e=this.#l.size,this.#s=new Pt.TypeDescriptorReader(this.#l),this.#r=new Ot.ScalarValueReader(this.#l),this.#n=new Ct(!0,!0,!0),this.#a=new Mt,this.#t=new Wt(this.#s,this.#r,[this.#n]),this.#l.atEnd())throw new Error("TODO: empty file");this.#y()}readTopLevelTLPairs(t,s){let l=t,n=null,i=0,a=null;do{if(a=this.#s.readTypeAndLength(l),a===null)break;i=l,l=l+1+a.length}while(l<s);return i}readAll(){let t=this.#p;for(;;){this.#p=t;try{if(t.readTypeDescriptor(this.#s)===null)return t.length?t.length:100;this.#a.trackElement(t)}catch(s){throw console.log(`Error! currentElement: ${t.toString()}`),s}if((t.isLocalSymbolTable===!0||t.isSharedSymbolTable===!0)&&(this.#i=!0),this.#i===!0&&(t.depth===1&&t.fieldNameSymbolID===7?this.#o=!0:t.depth===2&&this.#o===!0&&t.type===gt.string&&this.#n.addSymbol(yt.readScalarFromElement(t,this.#r),t.positionInStream)),t.fieldNameSymbolID!==void 0&&this.#n.addUsage(t.fieldNameSymbolID,t.bytePositionOfRepresentation||t.positionInStream),t.type===gt.symbol){let s=t.bytePositionOfRepresentation===null?t.varUIntLength:yt.readScalarFromElement(t,this.#r);this.#n.addUsage(s,t.bytePositionOfRepresentation||t.positionInStream)}if(t.firstAnnotation!==null&&this.#n.addUsage(t.firstAnnotation.magnitude,t.positionInStream),t.isScalar&&!t.isNull&&t.lengthWithoutAnnotations!==0,t.isContainer&&!t.isNull&&t.length!==0){let s=t.containsElement;t=this.#h[s[1]],t.repurpose(s[0],s[1],s[2],s[3],s[4],s[5])}else if(t.nextElement)t.repurpose(t.nextElement[0],t.nextElement[1],t.nextElement[2],t.nextElement[3],t.nextElement[4],t.nextElement[5]);else{for(;t.depth>0&&(t=this.#h[t.depth-1],t.nextElement===null););if(this.#i===!0&&t.depth===0&&(this.#i=!1),this.#o===!0&&t.depth<2&&(this.#o=!1),t.nextElement)t.repurpose(t.nextElement[0],t.nextElement[1],t.nextElement[2],t.nextElement[3],t.nextElement[4],t.nextElement[5]);else{if(!this.#l.atEnd(t.positionInStream+t.totalLength))throw new Error("Not at end of stream");t=void 0;break}}}}};pt.ValueStreamReader=dt});var bt=m(mt=>{"use strict";var Gt=w(),ve=ct(),Nt=class extends Gt.ByteReader{#l;#e;#s=1;#r=-1;#a;#n;#t;#h;#i=t=>{};#o=0;#p=async()=>{let t=this.#l.slice(this.#r,this.#r+this.#s);this.#a=await this.#h(t),this.#n=new Uint8Array(this.#a)};#y=async(t,s)=>{let l=!1;this.#r===-1&&(this.#r=0,l=!0),s!==void 0?(l=!0,this.#r=s):(this.#o<this.#r||this.#o+t>=this.#r+this.#s-1)&&(l=!0,this.#r=this.#o),l&&await this.#p()};constructor(t){super();this.#t=new FileReader;let s=this;if(this.#h=l=>new Promise(i=>{s.#t.onloadend=a=>{i(s.#t.result),s.#i(a)},s.#t.readAsArrayBuffer(l)}),Number.isInteger(t)&&t>0)this.#s=t;else if(t!==void 0)throw new Error("ByteSliceReader constructor called with invalid bufferSize")}loadFile(t){if(!(t instanceof File))throw new Error(`ByteSliceReader loadFile() passed invalid filePath File ${t}.`);return this.#l=t,this.#e=t.size,this.#e}nextByte(){if(this.atEnd())return null;let t=this.#o-this.#r;if(t<0||this.#n===void 0||t>=this.#n.length)return null;let s=this.#n[t];if(s===void 0)throw new Error(`nextByte byte is undefined at ${t} and ${this.#o}`);return this.#o++,s}skipBytes(t){this.#o+=t}setPosition(t){this.#o=t}setBufferSize(t){if(Number.isInteger(t)&&t>0)this.#s=t;else if(t!==void 0)throw new Error(`ByteSliceReader setBufferSize called with invalid bufferSize ${t}`)}async fillBuffer(t,s){Number.isInteger(t)&&t>0&&t<=this.#s&&(this.setPosition(s),await this.#y(t,s))}atEnd(t){if(t===void 0&&(t=this.#o),t===this.#e)return!0;if(t>this.#e)throw new Error(`ByteSliceReader atEnd() asked to skip beyond end of file. ${t} > ${this.#e}`);return!1}get size(){return this.#e}get positionInFile(){return this.#o}get biBuffer(){return this.#a}get isReady(){let t=this.#t.readyState;return t===2||t===0}set readerOnLoadEndCallback(t){this.#i=t}rawBytes(t,s){return this.#n.slice(t-this.#r,t-this.#r+s)}};mt.ByteSliceReader=Nt});var Et=m(xt=>{"use strict";var It=class{#l=null;constructor(t){this.#l=t}elementAt(t){return this.#l[t]}toArrays(){return this.#l}};xt.ElementStack=It});var $t=m(Bt=>{"use strict";var we=D().TypeDescriptorReader,Le=C().ByteBufferReader,Ve=R().IonElement,Xt=v(),x=E().IonTypes,O=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"],zt=r=>{let t=new Array(Math.ceil(r.length*4/3));for(let s=0;s<r.length;s+=3){let l=r[s],n=r[s+1],i=r[s+2],a=r[s+3];if(t[s*4/3]=O[l>>>2],t[s*4/3+1]=O[l<<4&63|(n||0)>>>4],s+1<r.length)if(t[s*4/3+2]=O[n<<2&63|(i||0)>>>6],s+2<r.length)t[s*4/3+3]=O[i&63];else return t.join("")+"=";else return t.join("")+"=="}return t.join("")},St=class{#l=[];#e=(t,s,l)=>{let n="";if(t.isNull)return n=`null.${x.nameFromType(t.type)}`,(t.type===x["int+"]||t.type===x["int-"])&&(n="null.int"),{representation:n,details:""};let i;if(t.isScalar){let a;switch(t.bytePositionOfRepresentation===null?a=t.varUIntLength:a=Xt.readScalarFromElement(t,s),n=a,t.type){case x.bool:n=t.boolRepresentation;break;case x.string:n=`${a}`;break;case x.symbol:n=`$${a}`,i=a;break;case x.decimal:a!==0?(n=`${a.coefficient.magnitude}d${a.exponent.magnitude}`,i=a):n=`${a}d0`;break;case x.timestamp:n=`${(""+a.year.magnitude).padStart(4,"0")}`,i=a,a.month!==void 0&&(n+=`-${(""+a.month.magnitude).padStart(2,"0")}`),a.day!==void 0?(n+=`-${(""+a.day.magnitude).padStart(2,"0")}T`,a.hour!==void 0&&(n+=`${(""+a.hour.magnitude).padStart(2,"0")}:${(""+a.minute.magnitude).padStart(2,"0")}`,a.second!==void 0&&(n+=`:${(""+a.second.magnitude).padStart(2,"0")}`,a.fractionCoefficient!==void 0&&(n+=`.${(""+a.fractionCoefficient.magnitude).padStart(-1*a.fractionExponent.magnitude,"0")}`)))):n+="T",a.offset.isNegative===!1?n+=`+${(""+Math.floor(a.offset.magnitude/60)).padStart(2,"0")}:${(""+a.offset.magnitude%60).padStart(2,"0")}`:Object.is(a.offset.magnitude,-0)&&(n+=`-${(""+Math.floor(-1*a.offset.magnitude/60)).padStart(2,"0")}:${(""+-1*a.offset.magnitude%60).padStart(2,"0")}`);break;case x.clob:n=`{{"${a}"}}`;break;case x.blob:if(t.length>0){let h=t.bytePositionOfRepresentation-t.positionInStream;n=`{{${zt(l.subarray(h,l.length))}}}`}else n="{{}}";break}}else if(t.isContainer)switch(t.type){case x.struct:n="{";break;case x.list:n="[";break;case x.sexp:n="(";break}else switch(t.type){case x.bvm:n=void 0,i={major:t.majorVersion,minor:t.minorVersion};break;case x.nop:n=void 0;break;default:n="?";break}return{representation:n,details:i}};constructor(){this.#l=[]}inspectElement(t,s,l,n,i){let a=t.nibblePositionStruct;a.byteNibbles="";for(let p=0;p<s.length;++p)a.byteNibbles+=`${s[p].toString(16).padStart(2,"0")}`;let h=this.#e(t,l,s);if(a.nibblesToDisplay=n*2,a.element.representation=h.representation,a.element.details=h.details,a.offset+=i,a.containersToClose=[],t.isContainer&&a.element.lengthValue===0&&!t.isNull&&(a.containersToClose.push(a.element.typeName),a.isZeroLengthContainer=!0),t.depth>0&&(a.parentOffset=t.container+i,t.bytesRemainingAtDepth===t.totalLength&&!(t.isContainer&&a.element.lengthValue!==0))){a.isLastElementAtDepth=!0;let p=t.depth,y=a.parentOffset,d=a.offset+a.element.totalLength;for(let o=this.#l.length-1;o>=0;--o)if(this.#l[o].offset===y)if(this.#l[o].offset+this.#l[o].element.totalLength===d){if(a.containersToClose.push(this.#l[o].element.typeName),p--,p===0)break;y=this.#l[o].parentOffset}else break}this.#l.push(a)}get nibblesToDisplay(){return this.#l}};Bt.Inspector=St});var Rt=m(Tt=>{"use strict";var De=R().IonElement,_e=E().IonTypes,vt=class{#l=[];#e=null;#s=0;#r=0;#a=!1;#n=!1;#t;constructor(t,s,l,n){this.#e=[];for(let i=0;i<t.length;++i)this.#e.push(t[i].reference());this.verifyStack(this.#e),this.#s=s,this.#a=l,this.#n=n}verifyElement(t){let s=this.#e[this.#e.length-1];if(s!==void 0){let l=t[0]+t[1]-(s[0]+s[1]);this.#r+=l}else this.#r+=t[1];if(this.#r>this.#s)throw new Error(`Verifier| ${this.#r} > ${this.anticipatedBytes}`);this.#e.push(t)}verifyStack(t,s){s===!0&&(console.log("Verifier|verifyStack"),console.dir(t));for(let l=1;l<t.length;++l){let n,i;if(t[l-1][6]!==void 0?(n=t[l-1][6],i=!0):(n=t[l-1][0]+t[l-1][1]+t[l-1][3],i=!1),t[l][0]+t[l][1]+t[l][3]!==n)throw new Error(`Verifier| ${t[l]} !== ${t[l-1]} ${i?"(next)":"(absolute)"}`);if(t[l][4]!==t[l-1][0]+t[l-1][1])throw new Error(`Verifier| ${t[l]} !== ${t[l-1]} container(4)`)}s===!0&&console.log("Verifier|verifyStack complete")}atEnd(t){if(this.#r+=t,this.#n===!0&&this.#r!==this.#s)throw new Error(`Verifier| ${this.#r} !== ${this.#s}`)}get elementLog(){return this.#e}};Tt.Verifier=vt});var wt=m((ke,At)=>{"use strict";var jt=C().ByteBufferReader,Ht=w().ByteReader,Zt=bt().ByteSliceReader,Jt=W().ElementReference,Kt=Et().ElementStack,Qt=R().IonElement,Yt=E().IonTypes,te=v(),ee=_().ScalarValueReader,le=P().SymbolTable,se=D().TypeDescriptorReader,ie=G().StructuralAnalyzer,ne=$t().Inspector,ae=Rt().Verifier;At.exports={ByteBufferReader:jt,ByteReader:Ht,ByteSliceReader:Zt,ElementReference:Jt,ElementStack:Kt,IonElement:Qt,IonTypes:Yt,utilities:te,ScalarValueReader:ee,SymbolTable:le,TypeDescriptorReader:se,Inspector:ne,Analyzer:ie,Verifier:ae}});return wt();})();
